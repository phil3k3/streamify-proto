{
  "contractName": "AgreementLibrary",
  "abi": [],
  "metadata": "{\"compiler\":{\"version\":\"0.8.19+commit.7dd6d404\"},\"language\":\"Solidity\",\"output\":{\"abi\":[],\"devdoc\":{\"author\":\"Superfluid\",\"details\":\"Helper library for building super agreement\",\"kind\":\"dev\",\"methods\":{},\"title\":\"Agreement Library\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"project:/contracts/agreements/AgreementLibrary.sol\":\"AgreementLibrary\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"@openzeppelin/contracts/token/ERC20/IERC20.sol\":{\"keccak256\":\"0x287b55befed2961a7eabd7d7b1b2839cbca8a5b80ef8dcbb25ed3d4c2002c305\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://bd39944e8fc06be6dbe2dd1d8449b5336e23c6a7ba3e8e9ae5ae0f37f35283f5\",\"dweb:/ipfs/QmPV3FGYjVwvKSgAXKUN3r9T9GwniZz83CxBpM7vyj2G53\"]},\"@openzeppelin/contracts/token/ERC721/IERC721.sol\":{\"keccak256\":\"0x5bce51e11f7d194b79ea59fe00c9e8de9fa2c5530124960f29a24d4c740a3266\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://7e66dfde185df46104c11bc89d08fa0760737aa59a2b8546a656473d810a8ea4\",\"dweb:/ipfs/QmXvyqtXPaPss2PD7eqPoSao5Szm2n6UMoiG8TZZDjmChR\"]},\"@openzeppelin/contracts/token/ERC721/extensions/IERC721Metadata.sol\":{\"keccak256\":\"0x75b829ff2f26c14355d1cba20e16fe7b29ca58eb5fef665ede48bc0f9c6c74b9\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://a0a107160525724f9e1bbbab031defc2f298296dd9e331f16a6f7130cec32146\",\"dweb:/ipfs/QmemujxSd7gX8A9M8UwmNbz4Ms3U9FG9QfudUgxwvTmPWf\"]},\"@openzeppelin/contracts/token/ERC777/IERC777.sol\":{\"keccak256\":\"0x79e6094047e40d49efa3c725b7a1519e16c28c46944884b5f6d0fbe89b450f03\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://2570d04d0b74df414fa33f9f7da6442419a07909ece7baeecd7147d9c7d6a432\",\"dweb:/ipfs/QmRDQM1kzddwCk8ateQgnogu495fWb4L9Xwr42DAQhHzi5\"]},\"@openzeppelin/contracts/utils/introspection/IERC165.sol\":{\"keccak256\":\"0x447a5f3ddc18419d41ff92b3773fb86471b1db25773e07f877f548918a185bf1\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://be161e54f24e5c6fae81a12db1a8ae87bc5ae1b0ddc805d82a1440a68455088f\",\"dweb:/ipfs/QmP7C3CHdY9urF4dEMb9wmsp1wMxHF6nhA2yQE5SKiPAdy\"]},\"@openzeppelin/contracts/utils/math/SafeCast.sol\":{\"keccak256\":\"0x52a8cfb0f5239d11b457dcdd1b326992ef672714ca8da71a157255bddd13f3ad\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://495145362c7ff1c9ca88c58bbbbcb412e3c2004406647412394486552ff6c278\",\"dweb:/ipfs/QmNNCeng6d5eRPDn6tkWSQhjE39XWfQEfjA63rRwHmr1iH\"]},\"project:/contracts/agreements/AgreementLibrary.sol\":{\"keccak256\":\"0xb109af522348da7f6be2fadaefff21f89d4ab0e8e0ffdb68870ac3f6a8f4eaeb\",\"license\":\"AGPLv3\",\"urls\":[\"bzz-raw://a9bb5be8672bcb61e612ecd5523b9caee89566d6d8ad18ad7099a168b995e2af\",\"dweb:/ipfs/QmWG8kq6PqVq2K5Pup2qeAwuC37xypoLs6eFdwsDwBBVwM\"]},\"project:/contracts/interfaces/agreements/IConstantFlowAgreementV1.sol\":{\"keccak256\":\"0xbbd5d7daa0206a39d15d349f69e6771d670c03fb394d65999f49db4fa21aeb0d\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://39db99750d43aebbb620a555a999016040c6f7b6e40eef61b9dcb49c8ac2a7da\",\"dweb:/ipfs/QmXsu29JWviUVnNxJZi1KRAK8GSEsyKdWyPLAJ6NzR7y4W\"]},\"project:/contracts/interfaces/agreements/IInstantDistributionAgreementV1.sol\":{\"keccak256\":\"0xac0ea75673feea931d1129ffff440390a0dd3a8f8cfa60fdb1481342652dc348\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://a08777cd6701548c08f1f55d0ce86e0773a80ef28613852cd2f0552a2a24a387\",\"dweb:/ipfs/QmTgWcQE6mNs3MLUCgqtnsC5UfYYQ9x3gsjXpvJdSe2WJg\"]},\"project:/contracts/interfaces/superfluid/Definitions.sol\":{\"keccak256\":\"0xdb22b7d9ef9c3bcf5b5ec64b965d371ed0fa8493486d45e5cb7f52718baec7d8\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://1e7500dd7267f2ebc509eb0bf7ed0a2316e44038ab60c0f4b9e1d9820c81e448\",\"dweb:/ipfs/QmaFZMARdPTQZwWmmXecdRTnqJopxF9qbt49ebZ9HJP9k2\"]},\"project:/contracts/interfaces/superfluid/IConstantInflowNFT.sol\":{\"keccak256\":\"0xb219bf31e236fe6c2968ecf0f6c3eb24cb6774aaf4fcc83252e9b06bba718f33\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://c09b0ffff8630ba6a86cdcd17f1ac65f8ba4e5b296e0320d945943e156fdf839\",\"dweb:/ipfs/QmPkBBJBYyYg1xxM4wRKdEpGK3b1beYeKoM6THzYb3qjM7\"]},\"project:/contracts/interfaces/superfluid/IConstantOutflowNFT.sol\":{\"keccak256\":\"0x15799c1552fa7aad4c1a7197451cd02422a6c768b236ab2904e72f7158a4a2c2\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://c62bb88c0c43ad162c8c226aede16a75c352738aaaf6794fa0c2881dcf59ad42\",\"dweb:/ipfs/QmeWQdFDvzbN8JrCRSRRnZEuw5EbWVzRLM2duhJ515QUXK\"]},\"project:/contracts/interfaces/superfluid/IFlowNFTBase.sol\":{\"keccak256\":\"0xa1600ee907288d7852678cc43f995498a039710a4f025a8785de288c4a4ceced\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://d317bab758d3b73005ac27b87e2410a087ca8507538795f555d37bd2d97a028d\",\"dweb:/ipfs/QmSHDBjGYTC64LkDaTQj38DZUGNV9mzxhUYAAfaDLQYEmS\"]},\"project:/contracts/interfaces/superfluid/IPoolAdminNFT.sol\":{\"keccak256\":\"0xa821859afd2405819b70daa367c47fc08d71b4d601effc527542862068a07403\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://a4596c30e866fdcabd672824dbee8cd6c24e516aa005c8d41057c686ff18c0c8\",\"dweb:/ipfs/QmSybbMVYYwWR6BVSoLwtk6YvYzts3HXZqxBYQpxKxPgCs\"]},\"project:/contracts/interfaces/superfluid/IPoolMemberNFT.sol\":{\"keccak256\":\"0xba6dc0dcbd8be4a96ab5f25f90977b7c71aa1eb15df1d6835ebe2b4bb46a3045\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://04a7a6e769361c9cfe38751c7dede99807c5c54f50f48c1ac929bb9f5a47fd19\",\"dweb:/ipfs/QmTTAp6LoQJC2N3Ko6HKWSr55iHijRBeUAoBxpri2Uw4jr\"]},\"project:/contracts/interfaces/superfluid/ISuperAgreement.sol\":{\"keccak256\":\"0xba0407c47917aee8b6e7cea745332d2f7244cc3b91d249426f0105b365feb0ee\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://4e8c38994af84e123476f8de8b81fe466e9a575374b13c38a4dc30bdd2d12c06\",\"dweb:/ipfs/QmfHrSyeMQN7wVn7qmD6aPH1wX4ugkhQXiR8te6xhADGaK\"]},\"project:/contracts/interfaces/superfluid/ISuperApp.sol\":{\"keccak256\":\"0x9a1cbf6d6037aac2381e8e66a2ad89e9afe6f89b290c21cb587ff6b06d137ee2\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://dc53d92d863ef2eb577b59d3c4310dc170590df95d7b7455044ce3a05329a826\",\"dweb:/ipfs/QmbEuVbV83R73w3o4CgsALUWVUitodjTUKVydK8cXSRCBk\"]},\"project:/contracts/interfaces/superfluid/ISuperToken.sol\":{\"keccak256\":\"0xa8a3d0d97b11244bb58331dc53b8152c03337b5e7907182b15bcfcfae355cdd7\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://91758fd68a25655981be1737b232b5a7bf912ed32dfa7d6c71ebe79e07a364a3\",\"dweb:/ipfs/QmPH1ZMeuFvUL3hXt6xaNfH6aUHNFASECzQM2uFtmcrBon\"]},\"project:/contracts/interfaces/superfluid/ISuperTokenFactory.sol\":{\"keccak256\":\"0xbfc7fbef20c707e64adabe969ea6db4d6c26a56155961a8bf46b7e55a16a046d\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://355aaac71bd3ebb260d6e6a9d35f07029a6f189a5d93c23f0dfec800630ed4c0\",\"dweb:/ipfs/QmXbE4rDRjTtVoxgDjVcJtxxdmK3WZ1ZEyG8iDMcn2mtfL\"]},\"project:/contracts/interfaces/superfluid/ISuperfluid.sol\":{\"keccak256\":\"0x6bf8494d93a4fc67d67b4a26ea9885707014f2123acd53d7cd0fd99987e30096\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://93e39b9f3b7911fbe3ac17ff8872632f35b42769f9e98d39eeee98bab4be6ae7\",\"dweb:/ipfs/QmaCVVoVWa67HwrQpRK9sAtLbPjxcmnkYVbSbWUNvPuTXn\"]},\"project:/contracts/interfaces/superfluid/ISuperfluidGovernance.sol\":{\"keccak256\":\"0xb9328d0977bd022c6771e679518c3d2bfcb6e29b400d2506813bb3cdab772bb4\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://bbae7172f9ca6c0c8080bdb53cfdff158142413bc21c99508988037d0d99b258\",\"dweb:/ipfs/QmVGzmQivV2dXA1Wuj2jEP6pM1MqGY6qtHtJ1J3cqcfoBK\"]},\"project:/contracts/interfaces/superfluid/ISuperfluidToken.sol\":{\"keccak256\":\"0x18ea972421ff57ce62103f90c820ee039f170f0189a4b3c73fd0ff09452d1dbf\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://dd24799269920b4b7925362b41650b5b968bb957dc0dec50b451f5382fe573c1\",\"dweb:/ipfs/QmbL19zzZZSbVu2gYA3FtJLu4kbCtk9BybxCU7oJfpUbE7\"]},\"project:/contracts/interfaces/tokens/ERC20WithTokenInfo.sol\":{\"keccak256\":\"0x479247ae4308ea9f5b50ff2bdae1299e91153a2c391a60e5d77cb3c980e527b9\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://649630108e202474391d729bdc76b2d928f5569bd5922e32332430bea4086725\",\"dweb:/ipfs/QmTozaRLwTWA7rXnyadKg423sojN7xVvidwJtrPdKcYTfU\"]},\"project:/contracts/interfaces/tokens/ISETH.sol\":{\"keccak256\":\"0x9857ab20198ca28d75afcf2f6843a23a1052bf2199a308392f8e2d8a63914cbc\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://8321dcd14869cfb65ed07c2de950f04cf79c1d0392cb2b820f0e76e2b344d1bb\",\"dweb:/ipfs/QmRbDDTwGUkpNnSNgiugGU7r4jJLTkgAFqQfRyd3zkEBXT\"]},\"project:/contracts/interfaces/tokens/TokenInfo.sol\":{\"keccak256\":\"0x5adaf0dcec7b8f91b9958c013fc3109f7b8b0efcd30391dc2bc1d98e0d406c0d\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://7dcdd83f10ee1b771e8423a387cad5a1fa325c2f6f37be44dba7d45975eb6b22\",\"dweb:/ipfs/QmNhGMNgexsrxJbmGzq7ry3555t77eCgjNjeDWMD46vQrG\"]}},\"version\":1}",
  "bytecode": "0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220dfbfba476c4b8bfce33b8c5156e2e3a6d4d98e43e469ca51e28a1aaf287612fb64736f6c63430008130033",
  "deployedBytecode": "0x73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220dfbfba476c4b8bfce33b8c5156e2e3a6d4d98e43e469ca51e28a1aaf287612fb64736f6c63430008130033",
  "immutableReferences": {},
  "generatedSources": [],
  "deployedGeneratedSources": [],
  "sourceMap": "469:8203:31:-:0;;;;;;;;;;;;;;;-1:-1:-1;;;469:8203:31;;;;;;;;;;;;;;;;;",
  "deployedSourceMap": "469:8203:31:-:0;;;;;;;;",
  "source": "// SPDX-License-Identifier: AGPLv3\npragma solidity 0.8.19;\n\nimport {\n    ISuperfluid,\n    ISuperfluidToken,\n    ISuperApp,\n    SuperAppDefinitions\n} from \"../interfaces/superfluid/ISuperfluid.sol\";\nimport { ISuperfluidToken } from \"../interfaces/superfluid/ISuperfluidToken.sol\";\n\nimport { SafeCast } from \"@openzeppelin/contracts/utils/math/SafeCast.sol\";\n\n\n/**\n * @title Agreement Library\n * @author Superfluid\n * @dev Helper library for building super agreement\n */\nlibrary AgreementLibrary {\n\n    using SafeCast for uint256;\n    using SafeCast for int256;\n\n    /**************************************************************************\n     * Context helpers\n     *************************************************************************/\n\n    /**\n     * @dev Authorize the msg.sender to access token agreement storage\n     *\n     * NOTE:\n     * - msg.sender must be the expected host contract.\n     * - it should revert on unauthorized access.\n     */\n    function authorizeTokenAccess(ISuperfluidToken token, bytes memory ctx)\n        internal view\n        returns (ISuperfluid.Context memory)\n    {\n        require(token.getHost() == msg.sender, \"unauthorized host\");\n        require(ISuperfluid(msg.sender).isCtxValid(ctx), \"invalid ctx\");\n        // [SECURITY] NOTE: we are holding the assumption here that the decoded ctx is correct\n        // at this point.\n        return ISuperfluid(msg.sender).decodeCtx(ctx);\n    }\n\n    /**************************************************************************\n     * Agreement callback helpers\n     *************************************************************************/\n\n    struct CallbackInputs {\n        ISuperfluidToken token;\n        address account;\n        bytes32 agreementId;\n        bytes agreementData;\n        uint256 appCreditGranted;\n        int256 appCreditUsed;\n        uint256 noopBit;\n    }\n\n    function createCallbackInputs(\n        ISuperfluidToken token,\n        address account,\n        bytes32 agreementId,\n        bytes memory agreementData\n    )\n       internal pure\n       returns (CallbackInputs memory inputs)\n    {\n        inputs.token = token;\n        inputs.account = account;\n        inputs.agreementId = agreementId;\n        inputs.agreementData = agreementData;\n    }\n\n    function callAppBeforeCallback(\n        CallbackInputs memory inputs,\n        bytes memory ctx\n    )\n        internal\n        returns(bytes memory cbdata)\n    {\n        bool isSuperApp;\n        bool isJailed;\n        uint256 noopMask;\n        (isSuperApp, isJailed, noopMask) = ISuperfluid(msg.sender).getAppManifest(ISuperApp(inputs.account));\n        if (isSuperApp && !isJailed) {\n            bytes memory appCtx = _pushCallbackStack(ctx, inputs);\n            if ((noopMask & inputs.noopBit) == 0) {\n                bytes memory callData = abi.encodeWithSelector(\n                    _selectorFromNoopBit(inputs.noopBit),\n                    inputs.token,\n                    address(this) /* agreementClass */,\n                    inputs.agreementId,\n                    inputs.agreementData,\n                    new bytes(0) // placeholder ctx\n                );\n                cbdata = ISuperfluid(msg.sender).callAppBeforeCallback(\n                    ISuperApp(inputs.account),\n                    callData,\n                    inputs.noopBit == SuperAppDefinitions.BEFORE_AGREEMENT_TERMINATED_NOOP,\n                    appCtx);\n            }\n            // [SECURITY] NOTE: ctx should be const, do not modify it ever to ensure callback stack correctness\n            _popCallbackStack(ctx, 0);\n        }\n    }\n\n    function callAppAfterCallback(\n        CallbackInputs memory inputs,\n        bytes memory cbdata,\n        bytes /* const */ memory ctx\n    )\n        internal\n        returns (ISuperfluid.Context memory appContext, bytes memory newCtx)\n    {\n        bool isSuperApp;\n        bool isJailed;\n        uint256 noopMask;\n        (isSuperApp, isJailed, noopMask) = ISuperfluid(msg.sender).getAppManifest(ISuperApp(inputs.account));\n\n        newCtx = ctx;\n        if (isSuperApp && !isJailed) {\n            newCtx = _pushCallbackStack(newCtx, inputs);\n            if ((noopMask & inputs.noopBit) == 0) {\n                bytes memory callData = abi.encodeWithSelector(\n                    _selectorFromNoopBit(inputs.noopBit),\n                    inputs.token,\n                    address(this) /* agreementClass */,\n                    inputs.agreementId,\n                    inputs.agreementData,\n                    cbdata,\n                    new bytes(0) // placeholder ctx\n                );\n                newCtx = ISuperfluid(msg.sender).callAppAfterCallback(\n                    ISuperApp(inputs.account),\n                    callData,\n                    inputs.noopBit == SuperAppDefinitions.AFTER_AGREEMENT_TERMINATED_NOOP,\n                    newCtx);\n\n                appContext = ISuperfluid(msg.sender).decodeCtx(newCtx);\n\n                // adjust credit used to the range [appCreditUsed..appCreditGranted]\n                appContext.appCreditUsed = _adjustNewAppCreditUsed(\n                    inputs.appCreditGranted,\n                    appContext.appCreditUsed\n                );\n            }\n            // [SECURITY] NOTE: ctx should be const, do not modify it ever to ensure callback stack correctness\n            newCtx = _popCallbackStack(ctx, appContext.appCreditUsed);\n        }\n    }\n\n    /**\n     * @dev Determines how much app credit the app will use.\n     * @param appCreditGranted set prior to callback based on input flow\n     * @param appCallbackDepositDelta set in callback - sum of deposit deltas of callback agreements and\n     * current flow owed deposit amount\n     */\n    function _adjustNewAppCreditUsed(\n        uint256 appCreditGranted,\n        int256 appCallbackDepositDelta\n    ) internal pure returns (int256) {\n        // NOTE: we use max(0, ...) because appCallbackDepositDelta can be negative and appCallbackDepositDelta\n        // should never go below 0, otherwise the SuperApp can return more money than borrowed\n        return max(\n            0,\n\n            // NOTE: we use min(appCreditGranted, appCallbackDepositDelta) to ensure that the SuperApp borrows\n            // appCreditGranted at most and appCallbackDepositDelta at least (if smaller than appCreditGranted)\n            min(\n                appCreditGranted.toInt256(),\n                appCallbackDepositDelta\n            )\n        );\n    }\n\n    function _selectorFromNoopBit(uint256 noopBit)\n        private pure\n        returns (bytes4 selector)\n    {\n        if (noopBit == SuperAppDefinitions.BEFORE_AGREEMENT_CREATED_NOOP) {\n            return ISuperApp.beforeAgreementCreated.selector;\n        } else if (noopBit == SuperAppDefinitions.BEFORE_AGREEMENT_UPDATED_NOOP) {\n            return ISuperApp.beforeAgreementUpdated.selector;\n        } else if (noopBit == SuperAppDefinitions.BEFORE_AGREEMENT_TERMINATED_NOOP) {\n            return ISuperApp.beforeAgreementTerminated.selector;\n        } else if (noopBit == SuperAppDefinitions.AFTER_AGREEMENT_CREATED_NOOP) {\n            return ISuperApp.afterAgreementCreated.selector;\n        } else if (noopBit == SuperAppDefinitions.AFTER_AGREEMENT_UPDATED_NOOP) {\n            return ISuperApp.afterAgreementUpdated.selector;\n        } else /* if (noopBit == SuperAppDefinitions.AFTER_AGREEMENT_TERMINATED_NOOP) */ {\n            return ISuperApp.afterAgreementTerminated.selector;\n        }\n    }\n\n    function _pushCallbackStack(\n        bytes memory ctx,\n        CallbackInputs memory inputs\n    )\n        private\n        returns (bytes memory appCtx)\n    {\n        // app credit params stack PUSH\n        // pass app credit and current credit used to the app,\n        appCtx = ISuperfluid(msg.sender).appCallbackPush(\n            ctx,\n            ISuperApp(inputs.account),\n            inputs.appCreditGranted,\n            inputs.appCreditUsed,\n            inputs.token);\n    }\n\n    function _popCallbackStack(\n        bytes memory ctx,\n        int256 appCreditUsedDelta\n    )\n        private\n        returns (bytes memory newCtx)\n    {\n        // app credit params stack POP\n        return ISuperfluid(msg.sender).appCallbackPop(ctx, appCreditUsedDelta);\n    }\n\n    /**************************************************************************\n     * Misc\n     *************************************************************************/\n\n    function max(int256 a, int256 b) internal pure returns (int256) { return a > b ? a : b; }\n    function max(uint256 a, uint256 b) internal pure returns (uint256) { return a > b ? a : b; }\n\n    function min(int256 a, int256 b) internal pure returns (int256) { return a > b ? b : a; }\n}\n",
  "sourcePath": "/home/runner/work/protocol-monorepo/protocol-monorepo/packages/ethereum-contracts/contracts/agreements/AgreementLibrary.sol",
  "ast": {
    "absolutePath": "project:/contracts/agreements/AgreementLibrary.sol",
    "exportedSymbols": {
      "AgreementLibrary": [
        7145
      ],
      "ISuperApp": [
        24506
      ],
      "ISuperfluid": [
        25647
      ],
      "ISuperfluidToken": [
        26072
      ],
      "SafeCast": [
        5507
      ],
      "SuperAppDefinitions": [
        23898
      ]
    },
    "id": 7146,
    "license": "AGPLv3",
    "nodeType": "SourceUnit",
    "nodes": [
      {
        "id": 6597,
        "literals": [
          "solidity",
          "0.8",
          ".19"
        ],
        "nodeType": "PragmaDirective",
        "src": "35:23:31"
      },
      {
        "absolutePath": "project:/contracts/interfaces/superfluid/ISuperfluid.sol",
        "file": "../interfaces/superfluid/ISuperfluid.sol",
        "id": 6602,
        "nameLocation": "-1:-1:-1",
        "nodeType": "ImportDirective",
        "scope": 7146,
        "sourceUnit": 25648,
        "src": "60:137:31",
        "symbolAliases": [
          {
            "foreign": {
              "id": 6598,
              "name": "ISuperfluid",
              "nodeType": "Identifier",
              "overloadedDeclarations": [],
              "referencedDeclaration": 25647,
              "src": "73:11:31",
              "typeDescriptions": {}
            },
            "nameLocation": "-1:-1:-1"
          },
          {
            "foreign": {
              "id": 6599,
              "name": "ISuperfluidToken",
              "nodeType": "Identifier",
              "overloadedDeclarations": [],
              "referencedDeclaration": 26072,
              "src": "90:16:31",
              "typeDescriptions": {}
            },
            "nameLocation": "-1:-1:-1"
          },
          {
            "foreign": {
              "id": 6600,
              "name": "ISuperApp",
              "nodeType": "Identifier",
              "overloadedDeclarations": [],
              "referencedDeclaration": 24506,
              "src": "112:9:31",
              "typeDescriptions": {}
            },
            "nameLocation": "-1:-1:-1"
          },
          {
            "foreign": {
              "id": 6601,
              "name": "SuperAppDefinitions",
              "nodeType": "Identifier",
              "overloadedDeclarations": [],
              "referencedDeclaration": 23898,
              "src": "127:19:31",
              "typeDescriptions": {}
            },
            "nameLocation": "-1:-1:-1"
          }
        ],
        "unitAlias": ""
      },
      {
        "absolutePath": "project:/contracts/interfaces/superfluid/ISuperfluidToken.sol",
        "file": "../interfaces/superfluid/ISuperfluidToken.sol",
        "id": 6604,
        "nameLocation": "-1:-1:-1",
        "nodeType": "ImportDirective",
        "scope": 7146,
        "sourceUnit": 26073,
        "src": "198:81:31",
        "symbolAliases": [
          {
            "foreign": {
              "id": 6603,
              "name": "ISuperfluidToken",
              "nodeType": "Identifier",
              "overloadedDeclarations": [],
              "referencedDeclaration": 26072,
              "src": "207:16:31",
              "typeDescriptions": {}
            },
            "nameLocation": "-1:-1:-1"
          }
        ],
        "unitAlias": ""
      },
      {
        "absolutePath": "@openzeppelin/contracts/utils/math/SafeCast.sol",
        "file": "@openzeppelin/contracts/utils/math/SafeCast.sol",
        "id": 6606,
        "nameLocation": "-1:-1:-1",
        "nodeType": "ImportDirective",
        "scope": 7146,
        "sourceUnit": 5508,
        "src": "281:75:31",
        "symbolAliases": [
          {
            "foreign": {
              "id": 6605,
              "name": "SafeCast",
              "nodeType": "Identifier",
              "overloadedDeclarations": [],
              "referencedDeclaration": 5507,
              "src": "290:8:31",
              "typeDescriptions": {}
            },
            "nameLocation": "-1:-1:-1"
          }
        ],
        "unitAlias": ""
      },
      {
        "abstract": false,
        "baseContracts": [],
        "canonicalName": "AgreementLibrary",
        "contractDependencies": [],
        "contractKind": "library",
        "documentation": {
          "id": 6607,
          "nodeType": "StructuredDocumentation",
          "src": "359:109:31",
          "text": " @title Agreement Library\n @author Superfluid\n @dev Helper library for building super agreement"
        },
        "fullyImplemented": true,
        "id": 7145,
        "linearizedBaseContracts": [
          7145
        ],
        "name": "AgreementLibrary",
        "nameLocation": "477:16:31",
        "nodeType": "ContractDefinition",
        "nodes": [
          {
            "global": false,
            "id": 6610,
            "libraryName": {
              "id": 6608,
              "name": "SafeCast",
              "nameLocations": [
                "507:8:31"
              ],
              "nodeType": "IdentifierPath",
              "referencedDeclaration": 5507,
              "src": "507:8:31"
            },
            "nodeType": "UsingForDirective",
            "src": "501:27:31",
            "typeName": {
              "id": 6609,
              "name": "uint256",
              "nodeType": "ElementaryTypeName",
              "src": "520:7:31",
              "typeDescriptions": {
                "typeIdentifier": "t_uint256",
                "typeString": "uint256"
              }
            }
          },
          {
            "global": false,
            "id": 6613,
            "libraryName": {
              "id": 6611,
              "name": "SafeCast",
              "nameLocations": [
                "539:8:31"
              ],
              "nodeType": "IdentifierPath",
              "referencedDeclaration": 5507,
              "src": "539:8:31"
            },
            "nodeType": "UsingForDirective",
            "src": "533:26:31",
            "typeName": {
              "id": 6612,
              "name": "int256",
              "nodeType": "ElementaryTypeName",
              "src": "552:6:31",
              "typeDescriptions": {
                "typeIdentifier": "t_int256",
                "typeString": "int256"
              }
            }
          },
          {
            "body": {
              "id": 6654,
              "nodeType": "Block",
              "src": "1105:325:31",
              "statements": [
                {
                  "expression": {
                    "arguments": [
                      {
                        "commonType": {
                          "typeIdentifier": "t_address",
                          "typeString": "address"
                        },
                        "id": 6631,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "lValueRequested": false,
                        "leftExpression": {
                          "arguments": [],
                          "expression": {
                            "argumentTypes": [],
                            "expression": {
                              "id": 6626,
                              "name": "token",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 6617,
                              "src": "1123:5:31",
                              "typeDescriptions": {
                                "typeIdentifier": "t_contract$_ISuperfluidToken_$26072",
                                "typeString": "contract ISuperfluidToken"
                              }
                            },
                            "id": 6627,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": false,
                            "lValueRequested": false,
                            "memberLocation": "1129:7:31",
                            "memberName": "getHost",
                            "nodeType": "MemberAccess",
                            "referencedDeclaration": 25809,
                            "src": "1123:13:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_function_external_view$__$returns$_t_address_$",
                              "typeString": "function () view external returns (address)"
                            }
                          },
                          "id": 6628,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "kind": "functionCall",
                          "lValueRequested": false,
                          "nameLocations": [],
                          "names": [],
                          "nodeType": "FunctionCall",
                          "src": "1123:15:31",
                          "tryCall": false,
                          "typeDescriptions": {
                            "typeIdentifier": "t_address",
                            "typeString": "address"
                          }
                        },
                        "nodeType": "BinaryOperation",
                        "operator": "==",
                        "rightExpression": {
                          "expression": {
                            "id": 6629,
                            "name": "msg",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": -15,
                            "src": "1142:3:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_magic_message",
                              "typeString": "msg"
                            }
                          },
                          "id": 6630,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "memberLocation": "1146:6:31",
                          "memberName": "sender",
                          "nodeType": "MemberAccess",
                          "src": "1142:10:31",
                          "typeDescriptions": {
                            "typeIdentifier": "t_address",
                            "typeString": "address"
                          }
                        },
                        "src": "1123:29:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      },
                      {
                        "hexValue": "756e617574686f72697a656420686f7374",
                        "id": 6632,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": true,
                        "kind": "string",
                        "lValueRequested": false,
                        "nodeType": "Literal",
                        "src": "1154:19:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_stringliteral_3f6dc9b293fecb1cf03a6aa9f2232df686d05e2ca49fd03d79912ef4cd344024",
                          "typeString": "literal_string \"unauthorized host\""
                        },
                        "value": "unauthorized host"
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        },
                        {
                          "typeIdentifier": "t_stringliteral_3f6dc9b293fecb1cf03a6aa9f2232df686d05e2ca49fd03d79912ef4cd344024",
                          "typeString": "literal_string \"unauthorized host\""
                        }
                      ],
                      "id": 6625,
                      "name": "require",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [
                        -18,
                        -18
                      ],
                      "referencedDeclaration": -18,
                      "src": "1115:7:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",
                        "typeString": "function (bool,string memory) pure"
                      }
                    },
                    "id": 6633,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "1115:59:31",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_tuple$__$",
                      "typeString": "tuple()"
                    }
                  },
                  "id": 6634,
                  "nodeType": "ExpressionStatement",
                  "src": "1115:59:31"
                },
                {
                  "expression": {
                    "arguments": [
                      {
                        "arguments": [
                          {
                            "id": 6641,
                            "name": "ctx",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 6619,
                            "src": "1227:3:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_bytes_memory_ptr",
                              "typeString": "bytes memory"
                            }
                          }
                        ],
                        "expression": {
                          "argumentTypes": [
                            {
                              "typeIdentifier": "t_bytes_memory_ptr",
                              "typeString": "bytes memory"
                            }
                          ],
                          "expression": {
                            "arguments": [
                              {
                                "expression": {
                                  "id": 6637,
                                  "name": "msg",
                                  "nodeType": "Identifier",
                                  "overloadedDeclarations": [],
                                  "referencedDeclaration": -15,
                                  "src": "1204:3:31",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_magic_message",
                                    "typeString": "msg"
                                  }
                                },
                                "id": 6638,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": false,
                                "lValueRequested": false,
                                "memberLocation": "1208:6:31",
                                "memberName": "sender",
                                "nodeType": "MemberAccess",
                                "src": "1204:10:31",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_address",
                                  "typeString": "address"
                                }
                              }
                            ],
                            "expression": {
                              "argumentTypes": [
                                {
                                  "typeIdentifier": "t_address",
                                  "typeString": "address"
                                }
                              ],
                              "id": 6636,
                              "name": "ISuperfluid",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 25647,
                              "src": "1192:11:31",
                              "typeDescriptions": {
                                "typeIdentifier": "t_type$_t_contract$_ISuperfluid_$25647_$",
                                "typeString": "type(contract ISuperfluid)"
                              }
                            },
                            "id": 6639,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": false,
                            "kind": "typeConversion",
                            "lValueRequested": false,
                            "nameLocations": [],
                            "names": [],
                            "nodeType": "FunctionCall",
                            "src": "1192:23:31",
                            "tryCall": false,
                            "typeDescriptions": {
                              "typeIdentifier": "t_contract$_ISuperfluid_$25647",
                              "typeString": "contract ISuperfluid"
                            }
                          },
                          "id": 6640,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "memberLocation": "1216:10:31",
                          "memberName": "isCtxValid",
                          "nodeType": "MemberAccess",
                          "referencedDeclaration": 25623,
                          "src": "1192:34:31",
                          "typeDescriptions": {
                            "typeIdentifier": "t_function_external_view$_t_bytes_memory_ptr_$returns$_t_bool_$",
                            "typeString": "function (bytes memory) view external returns (bool)"
                          }
                        },
                        "id": 6642,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "kind": "functionCall",
                        "lValueRequested": false,
                        "nameLocations": [],
                        "names": [],
                        "nodeType": "FunctionCall",
                        "src": "1192:39:31",
                        "tryCall": false,
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      },
                      {
                        "hexValue": "696e76616c696420637478",
                        "id": 6643,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": true,
                        "kind": "string",
                        "lValueRequested": false,
                        "nodeType": "Literal",
                        "src": "1233:13:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_stringliteral_8f8f08c62baf4acb9bbfb399b38ee27afacee1adb2672da3752ebc24a02d9298",
                          "typeString": "literal_string \"invalid ctx\""
                        },
                        "value": "invalid ctx"
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        },
                        {
                          "typeIdentifier": "t_stringliteral_8f8f08c62baf4acb9bbfb399b38ee27afacee1adb2672da3752ebc24a02d9298",
                          "typeString": "literal_string \"invalid ctx\""
                        }
                      ],
                      "id": 6635,
                      "name": "require",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [
                        -18,
                        -18
                      ],
                      "referencedDeclaration": -18,
                      "src": "1184:7:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",
                        "typeString": "function (bool,string memory) pure"
                      }
                    },
                    "id": 6644,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "1184:63:31",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_tuple$__$",
                      "typeString": "tuple()"
                    }
                  },
                  "id": 6645,
                  "nodeType": "ExpressionStatement",
                  "src": "1184:63:31"
                },
                {
                  "expression": {
                    "arguments": [
                      {
                        "id": 6651,
                        "name": "ctx",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 6619,
                        "src": "1419:3:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bytes_memory_ptr",
                          "typeString": "bytes memory"
                        }
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_bytes_memory_ptr",
                          "typeString": "bytes memory"
                        }
                      ],
                      "expression": {
                        "arguments": [
                          {
                            "expression": {
                              "id": 6647,
                              "name": "msg",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": -15,
                              "src": "1397:3:31",
                              "typeDescriptions": {
                                "typeIdentifier": "t_magic_message",
                                "typeString": "msg"
                              }
                            },
                            "id": 6648,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": false,
                            "lValueRequested": false,
                            "memberLocation": "1401:6:31",
                            "memberName": "sender",
                            "nodeType": "MemberAccess",
                            "src": "1397:10:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_address",
                              "typeString": "address"
                            }
                          }
                        ],
                        "expression": {
                          "argumentTypes": [
                            {
                              "typeIdentifier": "t_address",
                              "typeString": "address"
                            }
                          ],
                          "id": 6646,
                          "name": "ISuperfluid",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 25647,
                          "src": "1385:11:31",
                          "typeDescriptions": {
                            "typeIdentifier": "t_type$_t_contract$_ISuperfluid_$25647_$",
                            "typeString": "type(contract ISuperfluid)"
                          }
                        },
                        "id": 6649,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "kind": "typeConversion",
                        "lValueRequested": false,
                        "nameLocations": [],
                        "names": [],
                        "nodeType": "FunctionCall",
                        "src": "1385:23:31",
                        "tryCall": false,
                        "typeDescriptions": {
                          "typeIdentifier": "t_contract$_ISuperfluid_$25647",
                          "typeString": "contract ISuperfluid"
                        }
                      },
                      "id": 6650,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "lValueRequested": false,
                      "memberLocation": "1409:9:31",
                      "memberName": "decodeCtx",
                      "nodeType": "MemberAccess",
                      "referencedDeclaration": 25616,
                      "src": "1385:33:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_external_pure$_t_bytes_memory_ptr_$returns$_t_struct$_Context_$25580_memory_ptr_$",
                        "typeString": "function (bytes memory) pure external returns (struct ISuperfluid.Context memory)"
                      }
                    },
                    "id": 6652,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "1385:38:31",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_struct$_Context_$25580_memory_ptr",
                      "typeString": "struct ISuperfluid.Context memory"
                    }
                  },
                  "functionReturnParameters": 6624,
                  "id": 6653,
                  "nodeType": "Return",
                  "src": "1378:45:31"
                }
              ]
            },
            "documentation": {
              "id": 6614,
              "nodeType": "StructuredDocumentation",
              "src": "749:208:31",
              "text": " @dev Authorize the msg.sender to access token agreement storage\n NOTE:\n - msg.sender must be the expected host contract.\n - it should revert on unauthorized access."
            },
            "id": 6655,
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "authorizeTokenAccess",
            "nameLocation": "971:20:31",
            "nodeType": "FunctionDefinition",
            "parameters": {
              "id": 6620,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 6617,
                  "mutability": "mutable",
                  "name": "token",
                  "nameLocation": "1009:5:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 6655,
                  "src": "992:22:31",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_contract$_ISuperfluidToken_$26072",
                    "typeString": "contract ISuperfluidToken"
                  },
                  "typeName": {
                    "id": 6616,
                    "nodeType": "UserDefinedTypeName",
                    "pathNode": {
                      "id": 6615,
                      "name": "ISuperfluidToken",
                      "nameLocations": [
                        "992:16:31"
                      ],
                      "nodeType": "IdentifierPath",
                      "referencedDeclaration": 26072,
                      "src": "992:16:31"
                    },
                    "referencedDeclaration": 26072,
                    "src": "992:16:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_contract$_ISuperfluidToken_$26072",
                      "typeString": "contract ISuperfluidToken"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 6619,
                  "mutability": "mutable",
                  "name": "ctx",
                  "nameLocation": "1029:3:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 6655,
                  "src": "1016:16:31",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes_memory_ptr",
                    "typeString": "bytes"
                  },
                  "typeName": {
                    "id": 6618,
                    "name": "bytes",
                    "nodeType": "ElementaryTypeName",
                    "src": "1016:5:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_storage_ptr",
                      "typeString": "bytes"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "991:42:31"
            },
            "returnParameters": {
              "id": 6624,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 6623,
                  "mutability": "mutable",
                  "name": "",
                  "nameLocation": "-1:-1:-1",
                  "nodeType": "VariableDeclaration",
                  "scope": 6655,
                  "src": "1073:26:31",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_struct$_Context_$25580_memory_ptr",
                    "typeString": "struct ISuperfluid.Context"
                  },
                  "typeName": {
                    "id": 6622,
                    "nodeType": "UserDefinedTypeName",
                    "pathNode": {
                      "id": 6621,
                      "name": "ISuperfluid.Context",
                      "nameLocations": [
                        "1073:11:31",
                        "1085:7:31"
                      ],
                      "nodeType": "IdentifierPath",
                      "referencedDeclaration": 25580,
                      "src": "1073:19:31"
                    },
                    "referencedDeclaration": 25580,
                    "src": "1073:19:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_struct$_Context_$25580_storage_ptr",
                      "typeString": "struct ISuperfluid.Context"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "1072:28:31"
            },
            "scope": 7145,
            "src": "962:468:31",
            "stateMutability": "view",
            "virtual": false,
            "visibility": "internal"
          },
          {
            "canonicalName": "AgreementLibrary.CallbackInputs",
            "id": 6671,
            "members": [
              {
                "constant": false,
                "id": 6658,
                "mutability": "mutable",
                "name": "token",
                "nameLocation": "1680:5:31",
                "nodeType": "VariableDeclaration",
                "scope": 6671,
                "src": "1663:22:31",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_contract$_ISuperfluidToken_$26072",
                  "typeString": "contract ISuperfluidToken"
                },
                "typeName": {
                  "id": 6657,
                  "nodeType": "UserDefinedTypeName",
                  "pathNode": {
                    "id": 6656,
                    "name": "ISuperfluidToken",
                    "nameLocations": [
                      "1663:16:31"
                    ],
                    "nodeType": "IdentifierPath",
                    "referencedDeclaration": 26072,
                    "src": "1663:16:31"
                  },
                  "referencedDeclaration": 26072,
                  "src": "1663:16:31",
                  "typeDescriptions": {
                    "typeIdentifier": "t_contract$_ISuperfluidToken_$26072",
                    "typeString": "contract ISuperfluidToken"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 6660,
                "mutability": "mutable",
                "name": "account",
                "nameLocation": "1703:7:31",
                "nodeType": "VariableDeclaration",
                "scope": 6671,
                "src": "1695:15:31",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_address",
                  "typeString": "address"
                },
                "typeName": {
                  "id": 6659,
                  "name": "address",
                  "nodeType": "ElementaryTypeName",
                  "src": "1695:7:31",
                  "stateMutability": "nonpayable",
                  "typeDescriptions": {
                    "typeIdentifier": "t_address",
                    "typeString": "address"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 6662,
                "mutability": "mutable",
                "name": "agreementId",
                "nameLocation": "1728:11:31",
                "nodeType": "VariableDeclaration",
                "scope": 6671,
                "src": "1720:19:31",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_bytes32",
                  "typeString": "bytes32"
                },
                "typeName": {
                  "id": 6661,
                  "name": "bytes32",
                  "nodeType": "ElementaryTypeName",
                  "src": "1720:7:31",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes32",
                    "typeString": "bytes32"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 6664,
                "mutability": "mutable",
                "name": "agreementData",
                "nameLocation": "1755:13:31",
                "nodeType": "VariableDeclaration",
                "scope": 6671,
                "src": "1749:19:31",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_bytes_storage_ptr",
                  "typeString": "bytes"
                },
                "typeName": {
                  "id": 6663,
                  "name": "bytes",
                  "nodeType": "ElementaryTypeName",
                  "src": "1749:5:31",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes_storage_ptr",
                    "typeString": "bytes"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 6666,
                "mutability": "mutable",
                "name": "appCreditGranted",
                "nameLocation": "1786:16:31",
                "nodeType": "VariableDeclaration",
                "scope": 6671,
                "src": "1778:24:31",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_uint256",
                  "typeString": "uint256"
                },
                "typeName": {
                  "id": 6665,
                  "name": "uint256",
                  "nodeType": "ElementaryTypeName",
                  "src": "1778:7:31",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 6668,
                "mutability": "mutable",
                "name": "appCreditUsed",
                "nameLocation": "1819:13:31",
                "nodeType": "VariableDeclaration",
                "scope": 6671,
                "src": "1812:20:31",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_int256",
                  "typeString": "int256"
                },
                "typeName": {
                  "id": 6667,
                  "name": "int256",
                  "nodeType": "ElementaryTypeName",
                  "src": "1812:6:31",
                  "typeDescriptions": {
                    "typeIdentifier": "t_int256",
                    "typeString": "int256"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 6670,
                "mutability": "mutable",
                "name": "noopBit",
                "nameLocation": "1850:7:31",
                "nodeType": "VariableDeclaration",
                "scope": 6671,
                "src": "1842:15:31",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_uint256",
                  "typeString": "uint256"
                },
                "typeName": {
                  "id": 6669,
                  "name": "uint256",
                  "nodeType": "ElementaryTypeName",
                  "src": "1842:7:31",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  }
                },
                "visibility": "internal"
              }
            ],
            "name": "CallbackInputs",
            "nameLocation": "1638:14:31",
            "nodeType": "StructDefinition",
            "scope": 7145,
            "src": "1631:233:31",
            "visibility": "public"
          },
          {
            "body": {
              "id": 6710,
              "nodeType": "Block",
              "src": "2099:159:31",
              "statements": [
                {
                  "expression": {
                    "id": 6690,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftHandSide": {
                      "expression": {
                        "id": 6686,
                        "name": "inputs",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 6684,
                        "src": "2109:6:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                          "typeString": "struct AgreementLibrary.CallbackInputs memory"
                        }
                      },
                      "id": 6688,
                      "isConstant": false,
                      "isLValue": true,
                      "isPure": false,
                      "lValueRequested": true,
                      "memberLocation": "2116:5:31",
                      "memberName": "token",
                      "nodeType": "MemberAccess",
                      "referencedDeclaration": 6658,
                      "src": "2109:12:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_contract$_ISuperfluidToken_$26072",
                        "typeString": "contract ISuperfluidToken"
                      }
                    },
                    "nodeType": "Assignment",
                    "operator": "=",
                    "rightHandSide": {
                      "id": 6689,
                      "name": "token",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 6674,
                      "src": "2124:5:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_contract$_ISuperfluidToken_$26072",
                        "typeString": "contract ISuperfluidToken"
                      }
                    },
                    "src": "2109:20:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_contract$_ISuperfluidToken_$26072",
                      "typeString": "contract ISuperfluidToken"
                    }
                  },
                  "id": 6691,
                  "nodeType": "ExpressionStatement",
                  "src": "2109:20:31"
                },
                {
                  "expression": {
                    "id": 6696,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftHandSide": {
                      "expression": {
                        "id": 6692,
                        "name": "inputs",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 6684,
                        "src": "2139:6:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                          "typeString": "struct AgreementLibrary.CallbackInputs memory"
                        }
                      },
                      "id": 6694,
                      "isConstant": false,
                      "isLValue": true,
                      "isPure": false,
                      "lValueRequested": true,
                      "memberLocation": "2146:7:31",
                      "memberName": "account",
                      "nodeType": "MemberAccess",
                      "referencedDeclaration": 6660,
                      "src": "2139:14:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_address",
                        "typeString": "address"
                      }
                    },
                    "nodeType": "Assignment",
                    "operator": "=",
                    "rightHandSide": {
                      "id": 6695,
                      "name": "account",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 6676,
                      "src": "2156:7:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_address",
                        "typeString": "address"
                      }
                    },
                    "src": "2139:24:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_address",
                      "typeString": "address"
                    }
                  },
                  "id": 6697,
                  "nodeType": "ExpressionStatement",
                  "src": "2139:24:31"
                },
                {
                  "expression": {
                    "id": 6702,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftHandSide": {
                      "expression": {
                        "id": 6698,
                        "name": "inputs",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 6684,
                        "src": "2173:6:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                          "typeString": "struct AgreementLibrary.CallbackInputs memory"
                        }
                      },
                      "id": 6700,
                      "isConstant": false,
                      "isLValue": true,
                      "isPure": false,
                      "lValueRequested": true,
                      "memberLocation": "2180:11:31",
                      "memberName": "agreementId",
                      "nodeType": "MemberAccess",
                      "referencedDeclaration": 6662,
                      "src": "2173:18:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bytes32",
                        "typeString": "bytes32"
                      }
                    },
                    "nodeType": "Assignment",
                    "operator": "=",
                    "rightHandSide": {
                      "id": 6701,
                      "name": "agreementId",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 6678,
                      "src": "2194:11:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bytes32",
                        "typeString": "bytes32"
                      }
                    },
                    "src": "2173:32:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes32",
                      "typeString": "bytes32"
                    }
                  },
                  "id": 6703,
                  "nodeType": "ExpressionStatement",
                  "src": "2173:32:31"
                },
                {
                  "expression": {
                    "id": 6708,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftHandSide": {
                      "expression": {
                        "id": 6704,
                        "name": "inputs",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 6684,
                        "src": "2215:6:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                          "typeString": "struct AgreementLibrary.CallbackInputs memory"
                        }
                      },
                      "id": 6706,
                      "isConstant": false,
                      "isLValue": true,
                      "isPure": false,
                      "lValueRequested": true,
                      "memberLocation": "2222:13:31",
                      "memberName": "agreementData",
                      "nodeType": "MemberAccess",
                      "referencedDeclaration": 6664,
                      "src": "2215:20:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bytes_memory_ptr",
                        "typeString": "bytes memory"
                      }
                    },
                    "nodeType": "Assignment",
                    "operator": "=",
                    "rightHandSide": {
                      "id": 6707,
                      "name": "agreementData",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 6680,
                      "src": "2238:13:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bytes_memory_ptr",
                        "typeString": "bytes memory"
                      }
                    },
                    "src": "2215:36:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_memory_ptr",
                      "typeString": "bytes memory"
                    }
                  },
                  "id": 6709,
                  "nodeType": "ExpressionStatement",
                  "src": "2215:36:31"
                }
              ]
            },
            "id": 6711,
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "createCallbackInputs",
            "nameLocation": "1879:20:31",
            "nodeType": "FunctionDefinition",
            "parameters": {
              "id": 6681,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 6674,
                  "mutability": "mutable",
                  "name": "token",
                  "nameLocation": "1926:5:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 6711,
                  "src": "1909:22:31",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_contract$_ISuperfluidToken_$26072",
                    "typeString": "contract ISuperfluidToken"
                  },
                  "typeName": {
                    "id": 6673,
                    "nodeType": "UserDefinedTypeName",
                    "pathNode": {
                      "id": 6672,
                      "name": "ISuperfluidToken",
                      "nameLocations": [
                        "1909:16:31"
                      ],
                      "nodeType": "IdentifierPath",
                      "referencedDeclaration": 26072,
                      "src": "1909:16:31"
                    },
                    "referencedDeclaration": 26072,
                    "src": "1909:16:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_contract$_ISuperfluidToken_$26072",
                      "typeString": "contract ISuperfluidToken"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 6676,
                  "mutability": "mutable",
                  "name": "account",
                  "nameLocation": "1949:7:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 6711,
                  "src": "1941:15:31",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_address",
                    "typeString": "address"
                  },
                  "typeName": {
                    "id": 6675,
                    "name": "address",
                    "nodeType": "ElementaryTypeName",
                    "src": "1941:7:31",
                    "stateMutability": "nonpayable",
                    "typeDescriptions": {
                      "typeIdentifier": "t_address",
                      "typeString": "address"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 6678,
                  "mutability": "mutable",
                  "name": "agreementId",
                  "nameLocation": "1974:11:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 6711,
                  "src": "1966:19:31",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes32",
                    "typeString": "bytes32"
                  },
                  "typeName": {
                    "id": 6677,
                    "name": "bytes32",
                    "nodeType": "ElementaryTypeName",
                    "src": "1966:7:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes32",
                      "typeString": "bytes32"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 6680,
                  "mutability": "mutable",
                  "name": "agreementData",
                  "nameLocation": "2008:13:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 6711,
                  "src": "1995:26:31",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes_memory_ptr",
                    "typeString": "bytes"
                  },
                  "typeName": {
                    "id": 6679,
                    "name": "bytes",
                    "nodeType": "ElementaryTypeName",
                    "src": "1995:5:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_storage_ptr",
                      "typeString": "bytes"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "1899:128:31"
            },
            "returnParameters": {
              "id": 6685,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 6684,
                  "mutability": "mutable",
                  "name": "inputs",
                  "nameLocation": "2087:6:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 6711,
                  "src": "2065:28:31",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                    "typeString": "struct AgreementLibrary.CallbackInputs"
                  },
                  "typeName": {
                    "id": 6683,
                    "nodeType": "UserDefinedTypeName",
                    "pathNode": {
                      "id": 6682,
                      "name": "CallbackInputs",
                      "nameLocations": [
                        "2065:14:31"
                      ],
                      "nodeType": "IdentifierPath",
                      "referencedDeclaration": 6671,
                      "src": "2065:14:31"
                    },
                    "referencedDeclaration": 6671,
                    "src": "2065:14:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_struct$_CallbackInputs_$6671_storage_ptr",
                      "typeString": "struct AgreementLibrary.CallbackInputs"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "2064:30:31"
            },
            "scope": 7145,
            "src": "1870:388:31",
            "stateMutability": "pure",
            "virtual": false,
            "visibility": "internal"
          },
          {
            "body": {
              "id": 6817,
              "nodeType": "Block",
              "src": "2423:1159:31",
              "statements": [
                {
                  "assignments": [
                    6722
                  ],
                  "declarations": [
                    {
                      "constant": false,
                      "id": 6722,
                      "mutability": "mutable",
                      "name": "isSuperApp",
                      "nameLocation": "2438:10:31",
                      "nodeType": "VariableDeclaration",
                      "scope": 6817,
                      "src": "2433:15:31",
                      "stateVariable": false,
                      "storageLocation": "default",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bool",
                        "typeString": "bool"
                      },
                      "typeName": {
                        "id": 6721,
                        "name": "bool",
                        "nodeType": "ElementaryTypeName",
                        "src": "2433:4:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      },
                      "visibility": "internal"
                    }
                  ],
                  "id": 6723,
                  "nodeType": "VariableDeclarationStatement",
                  "src": "2433:15:31"
                },
                {
                  "assignments": [
                    6725
                  ],
                  "declarations": [
                    {
                      "constant": false,
                      "id": 6725,
                      "mutability": "mutable",
                      "name": "isJailed",
                      "nameLocation": "2463:8:31",
                      "nodeType": "VariableDeclaration",
                      "scope": 6817,
                      "src": "2458:13:31",
                      "stateVariable": false,
                      "storageLocation": "default",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bool",
                        "typeString": "bool"
                      },
                      "typeName": {
                        "id": 6724,
                        "name": "bool",
                        "nodeType": "ElementaryTypeName",
                        "src": "2458:4:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      },
                      "visibility": "internal"
                    }
                  ],
                  "id": 6726,
                  "nodeType": "VariableDeclarationStatement",
                  "src": "2458:13:31"
                },
                {
                  "assignments": [
                    6728
                  ],
                  "declarations": [
                    {
                      "constant": false,
                      "id": 6728,
                      "mutability": "mutable",
                      "name": "noopMask",
                      "nameLocation": "2489:8:31",
                      "nodeType": "VariableDeclaration",
                      "scope": 6817,
                      "src": "2481:16:31",
                      "stateVariable": false,
                      "storageLocation": "default",
                      "typeDescriptions": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      },
                      "typeName": {
                        "id": 6727,
                        "name": "uint256",
                        "nodeType": "ElementaryTypeName",
                        "src": "2481:7:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      "visibility": "internal"
                    }
                  ],
                  "id": 6729,
                  "nodeType": "VariableDeclarationStatement",
                  "src": "2481:16:31"
                },
                {
                  "expression": {
                    "id": 6744,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftHandSide": {
                      "components": [
                        {
                          "id": 6730,
                          "name": "isSuperApp",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 6722,
                          "src": "2508:10:31",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bool",
                            "typeString": "bool"
                          }
                        },
                        {
                          "id": 6731,
                          "name": "isJailed",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 6725,
                          "src": "2520:8:31",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bool",
                            "typeString": "bool"
                          }
                        },
                        {
                          "id": 6732,
                          "name": "noopMask",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 6728,
                          "src": "2530:8:31",
                          "typeDescriptions": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          }
                        }
                      ],
                      "id": 6733,
                      "isConstant": false,
                      "isInlineArray": false,
                      "isLValue": true,
                      "isPure": false,
                      "lValueRequested": true,
                      "nodeType": "TupleExpression",
                      "src": "2507:32:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_tuple$_t_bool_$_t_bool_$_t_uint256_$",
                        "typeString": "tuple(bool,bool,uint256)"
                      }
                    },
                    "nodeType": "Assignment",
                    "operator": "=",
                    "rightHandSide": {
                      "arguments": [
                        {
                          "arguments": [
                            {
                              "expression": {
                                "id": 6740,
                                "name": "inputs",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 6714,
                                "src": "2591:6:31",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                                  "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                }
                              },
                              "id": 6741,
                              "isConstant": false,
                              "isLValue": true,
                              "isPure": false,
                              "lValueRequested": false,
                              "memberLocation": "2598:7:31",
                              "memberName": "account",
                              "nodeType": "MemberAccess",
                              "referencedDeclaration": 6660,
                              "src": "2591:14:31",
                              "typeDescriptions": {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            }
                          ],
                          "expression": {
                            "argumentTypes": [
                              {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            ],
                            "id": 6739,
                            "name": "ISuperApp",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 24506,
                            "src": "2581:9:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_type$_t_contract$_ISuperApp_$24506_$",
                              "typeString": "type(contract ISuperApp)"
                            }
                          },
                          "id": 6742,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "kind": "typeConversion",
                          "lValueRequested": false,
                          "nameLocations": [],
                          "names": [],
                          "nodeType": "FunctionCall",
                          "src": "2581:25:31",
                          "tryCall": false,
                          "typeDescriptions": {
                            "typeIdentifier": "t_contract$_ISuperApp_$24506",
                            "typeString": "contract ISuperApp"
                          }
                        }
                      ],
                      "expression": {
                        "argumentTypes": [
                          {
                            "typeIdentifier": "t_contract$_ISuperApp_$24506",
                            "typeString": "contract ISuperApp"
                          }
                        ],
                        "expression": {
                          "arguments": [
                            {
                              "expression": {
                                "id": 6735,
                                "name": "msg",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": -15,
                                "src": "2554:3:31",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_magic_message",
                                  "typeString": "msg"
                                }
                              },
                              "id": 6736,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "lValueRequested": false,
                              "memberLocation": "2558:6:31",
                              "memberName": "sender",
                              "nodeType": "MemberAccess",
                              "src": "2554:10:31",
                              "typeDescriptions": {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            }
                          ],
                          "expression": {
                            "argumentTypes": [
                              {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            ],
                            "id": 6734,
                            "name": "ISuperfluid",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 25647,
                            "src": "2542:11:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_type$_t_contract$_ISuperfluid_$25647_$",
                              "typeString": "type(contract ISuperfluid)"
                            }
                          },
                          "id": 6737,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "kind": "typeConversion",
                          "lValueRequested": false,
                          "nameLocations": [],
                          "names": [],
                          "nodeType": "FunctionCall",
                          "src": "2542:23:31",
                          "tryCall": false,
                          "typeDescriptions": {
                            "typeIdentifier": "t_contract$_ISuperfluid_$25647",
                            "typeString": "contract ISuperfluid"
                          }
                        },
                        "id": 6738,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "lValueRequested": false,
                        "memberLocation": "2566:14:31",
                        "memberName": "getAppManifest",
                        "nodeType": "MemberAccess",
                        "referencedDeclaration": 25415,
                        "src": "2542:38:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_function_external_view$_t_contract$_ISuperApp_$24506_$returns$_t_bool_$_t_bool_$_t_uint256_$",
                          "typeString": "function (contract ISuperApp) view external returns (bool,bool,uint256)"
                        }
                      },
                      "id": 6743,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "kind": "functionCall",
                      "lValueRequested": false,
                      "nameLocations": [],
                      "names": [],
                      "nodeType": "FunctionCall",
                      "src": "2542:65:31",
                      "tryCall": false,
                      "typeDescriptions": {
                        "typeIdentifier": "t_tuple$_t_bool_$_t_bool_$_t_uint256_$",
                        "typeString": "tuple(bool,bool,uint256)"
                      }
                    },
                    "src": "2507:100:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_tuple$__$",
                      "typeString": "tuple()"
                    }
                  },
                  "id": 6745,
                  "nodeType": "ExpressionStatement",
                  "src": "2507:100:31"
                },
                {
                  "condition": {
                    "commonType": {
                      "typeIdentifier": "t_bool",
                      "typeString": "bool"
                    },
                    "id": 6749,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftExpression": {
                      "id": 6746,
                      "name": "isSuperApp",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 6722,
                      "src": "2621:10:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bool",
                        "typeString": "bool"
                      }
                    },
                    "nodeType": "BinaryOperation",
                    "operator": "&&",
                    "rightExpression": {
                      "id": 6748,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "lValueRequested": false,
                      "nodeType": "UnaryOperation",
                      "operator": "!",
                      "prefix": true,
                      "src": "2635:9:31",
                      "subExpression": {
                        "id": 6747,
                        "name": "isJailed",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 6725,
                        "src": "2636:8:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      },
                      "typeDescriptions": {
                        "typeIdentifier": "t_bool",
                        "typeString": "bool"
                      }
                    },
                    "src": "2621:23:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bool",
                      "typeString": "bool"
                    }
                  },
                  "id": 6816,
                  "nodeType": "IfStatement",
                  "src": "2617:959:31",
                  "trueBody": {
                    "id": 6815,
                    "nodeType": "Block",
                    "src": "2646:930:31",
                    "statements": [
                      {
                        "assignments": [
                          6751
                        ],
                        "declarations": [
                          {
                            "constant": false,
                            "id": 6751,
                            "mutability": "mutable",
                            "name": "appCtx",
                            "nameLocation": "2673:6:31",
                            "nodeType": "VariableDeclaration",
                            "scope": 6815,
                            "src": "2660:19:31",
                            "stateVariable": false,
                            "storageLocation": "memory",
                            "typeDescriptions": {
                              "typeIdentifier": "t_bytes_memory_ptr",
                              "typeString": "bytes"
                            },
                            "typeName": {
                              "id": 6750,
                              "name": "bytes",
                              "nodeType": "ElementaryTypeName",
                              "src": "2660:5:31",
                              "typeDescriptions": {
                                "typeIdentifier": "t_bytes_storage_ptr",
                                "typeString": "bytes"
                              }
                            },
                            "visibility": "internal"
                          }
                        ],
                        "id": 6756,
                        "initialValue": {
                          "arguments": [
                            {
                              "id": 6753,
                              "name": "ctx",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 6716,
                              "src": "2701:3:31",
                              "typeDescriptions": {
                                "typeIdentifier": "t_bytes_memory_ptr",
                                "typeString": "bytes memory"
                              }
                            },
                            {
                              "id": 6754,
                              "name": "inputs",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 6714,
                              "src": "2706:6:31",
                              "typeDescriptions": {
                                "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                                "typeString": "struct AgreementLibrary.CallbackInputs memory"
                              }
                            }
                          ],
                          "expression": {
                            "argumentTypes": [
                              {
                                "typeIdentifier": "t_bytes_memory_ptr",
                                "typeString": "bytes memory"
                              },
                              {
                                "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                                "typeString": "struct AgreementLibrary.CallbackInputs memory"
                              }
                            ],
                            "id": 6752,
                            "name": "_pushCallbackStack",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 7074,
                            "src": "2682:18:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_function_internal_nonpayable$_t_bytes_memory_ptr_$_t_struct$_CallbackInputs_$6671_memory_ptr_$returns$_t_bytes_memory_ptr_$",
                              "typeString": "function (bytes memory,struct AgreementLibrary.CallbackInputs memory) returns (bytes memory)"
                            }
                          },
                          "id": 6755,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "kind": "functionCall",
                          "lValueRequested": false,
                          "nameLocations": [],
                          "names": [],
                          "nodeType": "FunctionCall",
                          "src": "2682:31:31",
                          "tryCall": false,
                          "typeDescriptions": {
                            "typeIdentifier": "t_bytes_memory_ptr",
                            "typeString": "bytes memory"
                          }
                        },
                        "nodeType": "VariableDeclarationStatement",
                        "src": "2660:53:31"
                      },
                      {
                        "condition": {
                          "commonType": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          },
                          "id": 6763,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "leftExpression": {
                            "components": [
                              {
                                "commonType": {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                },
                                "id": 6760,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": false,
                                "lValueRequested": false,
                                "leftExpression": {
                                  "id": 6757,
                                  "name": "noopMask",
                                  "nodeType": "Identifier",
                                  "overloadedDeclarations": [],
                                  "referencedDeclaration": 6728,
                                  "src": "2732:8:31",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_uint256",
                                    "typeString": "uint256"
                                  }
                                },
                                "nodeType": "BinaryOperation",
                                "operator": "&",
                                "rightExpression": {
                                  "expression": {
                                    "id": 6758,
                                    "name": "inputs",
                                    "nodeType": "Identifier",
                                    "overloadedDeclarations": [],
                                    "referencedDeclaration": 6714,
                                    "src": "2743:6:31",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                                      "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                    }
                                  },
                                  "id": 6759,
                                  "isConstant": false,
                                  "isLValue": true,
                                  "isPure": false,
                                  "lValueRequested": false,
                                  "memberLocation": "2750:7:31",
                                  "memberName": "noopBit",
                                  "nodeType": "MemberAccess",
                                  "referencedDeclaration": 6670,
                                  "src": "2743:14:31",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_uint256",
                                    "typeString": "uint256"
                                  }
                                },
                                "src": "2732:25:31",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                }
                              }
                            ],
                            "id": 6761,
                            "isConstant": false,
                            "isInlineArray": false,
                            "isLValue": false,
                            "isPure": false,
                            "lValueRequested": false,
                            "nodeType": "TupleExpression",
                            "src": "2731:27:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "nodeType": "BinaryOperation",
                          "operator": "==",
                          "rightExpression": {
                            "hexValue": "30",
                            "id": 6762,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": true,
                            "kind": "number",
                            "lValueRequested": false,
                            "nodeType": "Literal",
                            "src": "2762:1:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_rational_0_by_1",
                              "typeString": "int_const 0"
                            },
                            "value": "0"
                          },
                          "src": "2731:32:31",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bool",
                            "typeString": "bool"
                          }
                        },
                        "id": 6809,
                        "nodeType": "IfStatement",
                        "src": "2727:688:31",
                        "trueBody": {
                          "id": 6808,
                          "nodeType": "Block",
                          "src": "2765:650:31",
                          "statements": [
                            {
                              "assignments": [
                                6765
                              ],
                              "declarations": [
                                {
                                  "constant": false,
                                  "id": 6765,
                                  "mutability": "mutable",
                                  "name": "callData",
                                  "nameLocation": "2796:8:31",
                                  "nodeType": "VariableDeclaration",
                                  "scope": 6808,
                                  "src": "2783:21:31",
                                  "stateVariable": false,
                                  "storageLocation": "memory",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_bytes_memory_ptr",
                                    "typeString": "bytes"
                                  },
                                  "typeName": {
                                    "id": 6764,
                                    "name": "bytes",
                                    "nodeType": "ElementaryTypeName",
                                    "src": "2783:5:31",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_bytes_storage_ptr",
                                      "typeString": "bytes"
                                    }
                                  },
                                  "visibility": "internal"
                                }
                              ],
                              "id": 6787,
                              "initialValue": {
                                "arguments": [
                                  {
                                    "arguments": [
                                      {
                                        "expression": {
                                          "id": 6769,
                                          "name": "inputs",
                                          "nodeType": "Identifier",
                                          "overloadedDeclarations": [],
                                          "referencedDeclaration": 6714,
                                          "src": "2872:6:31",
                                          "typeDescriptions": {
                                            "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                                            "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                          }
                                        },
                                        "id": 6770,
                                        "isConstant": false,
                                        "isLValue": true,
                                        "isPure": false,
                                        "lValueRequested": false,
                                        "memberLocation": "2879:7:31",
                                        "memberName": "noopBit",
                                        "nodeType": "MemberAccess",
                                        "referencedDeclaration": 6670,
                                        "src": "2872:14:31",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_uint256",
                                          "typeString": "uint256"
                                        }
                                      }
                                    ],
                                    "expression": {
                                      "argumentTypes": [
                                        {
                                          "typeIdentifier": "t_uint256",
                                          "typeString": "uint256"
                                        }
                                      ],
                                      "id": 6768,
                                      "name": "_selectorFromNoopBit",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 7043,
                                      "src": "2851:20:31",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_function_internal_pure$_t_uint256_$returns$_t_bytes4_$",
                                        "typeString": "function (uint256) pure returns (bytes4)"
                                      }
                                    },
                                    "id": 6771,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": false,
                                    "kind": "functionCall",
                                    "lValueRequested": false,
                                    "nameLocations": [],
                                    "names": [],
                                    "nodeType": "FunctionCall",
                                    "src": "2851:36:31",
                                    "tryCall": false,
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_bytes4",
                                      "typeString": "bytes4"
                                    }
                                  },
                                  {
                                    "expression": {
                                      "id": 6772,
                                      "name": "inputs",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 6714,
                                      "src": "2909:6:31",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                                        "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                      }
                                    },
                                    "id": 6773,
                                    "isConstant": false,
                                    "isLValue": true,
                                    "isPure": false,
                                    "lValueRequested": false,
                                    "memberLocation": "2916:5:31",
                                    "memberName": "token",
                                    "nodeType": "MemberAccess",
                                    "referencedDeclaration": 6658,
                                    "src": "2909:12:31",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_contract$_ISuperfluidToken_$26072",
                                      "typeString": "contract ISuperfluidToken"
                                    }
                                  },
                                  {
                                    "arguments": [
                                      {
                                        "id": 6776,
                                        "name": "this",
                                        "nodeType": "Identifier",
                                        "overloadedDeclarations": [],
                                        "referencedDeclaration": -28,
                                        "src": "2951:4:31",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_contract$_AgreementLibrary_$7145",
                                          "typeString": "library AgreementLibrary"
                                        }
                                      }
                                    ],
                                    "expression": {
                                      "argumentTypes": [
                                        {
                                          "typeIdentifier": "t_contract$_AgreementLibrary_$7145",
                                          "typeString": "library AgreementLibrary"
                                        }
                                      ],
                                      "id": 6775,
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": true,
                                      "lValueRequested": false,
                                      "nodeType": "ElementaryTypeNameExpression",
                                      "src": "2943:7:31",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_type$_t_address_$",
                                        "typeString": "type(address)"
                                      },
                                      "typeName": {
                                        "id": 6774,
                                        "name": "address",
                                        "nodeType": "ElementaryTypeName",
                                        "src": "2943:7:31",
                                        "typeDescriptions": {}
                                      }
                                    },
                                    "id": 6777,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": false,
                                    "kind": "typeConversion",
                                    "lValueRequested": false,
                                    "nameLocations": [],
                                    "names": [],
                                    "nodeType": "FunctionCall",
                                    "src": "2943:13:31",
                                    "tryCall": false,
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_address",
                                      "typeString": "address"
                                    }
                                  },
                                  {
                                    "expression": {
                                      "id": 6778,
                                      "name": "inputs",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 6714,
                                      "src": "2999:6:31",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                                        "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                      }
                                    },
                                    "id": 6779,
                                    "isConstant": false,
                                    "isLValue": true,
                                    "isPure": false,
                                    "lValueRequested": false,
                                    "memberLocation": "3006:11:31",
                                    "memberName": "agreementId",
                                    "nodeType": "MemberAccess",
                                    "referencedDeclaration": 6662,
                                    "src": "2999:18:31",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_bytes32",
                                      "typeString": "bytes32"
                                    }
                                  },
                                  {
                                    "expression": {
                                      "id": 6780,
                                      "name": "inputs",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 6714,
                                      "src": "3039:6:31",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                                        "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                      }
                                    },
                                    "id": 6781,
                                    "isConstant": false,
                                    "isLValue": true,
                                    "isPure": false,
                                    "lValueRequested": false,
                                    "memberLocation": "3046:13:31",
                                    "memberName": "agreementData",
                                    "nodeType": "MemberAccess",
                                    "referencedDeclaration": 6664,
                                    "src": "3039:20:31",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_bytes_memory_ptr",
                                      "typeString": "bytes memory"
                                    }
                                  },
                                  {
                                    "arguments": [
                                      {
                                        "hexValue": "30",
                                        "id": 6784,
                                        "isConstant": false,
                                        "isLValue": false,
                                        "isPure": true,
                                        "kind": "number",
                                        "lValueRequested": false,
                                        "nodeType": "Literal",
                                        "src": "3091:1:31",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_rational_0_by_1",
                                          "typeString": "int_const 0"
                                        },
                                        "value": "0"
                                      }
                                    ],
                                    "expression": {
                                      "argumentTypes": [
                                        {
                                          "typeIdentifier": "t_rational_0_by_1",
                                          "typeString": "int_const 0"
                                        }
                                      ],
                                      "id": 6783,
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": true,
                                      "lValueRequested": false,
                                      "nodeType": "NewExpression",
                                      "src": "3081:9:31",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_function_objectcreation_pure$_t_uint256_$returns$_t_bytes_memory_ptr_$",
                                        "typeString": "function (uint256) pure returns (bytes memory)"
                                      },
                                      "typeName": {
                                        "id": 6782,
                                        "name": "bytes",
                                        "nodeType": "ElementaryTypeName",
                                        "src": "3085:5:31",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_bytes_storage_ptr",
                                          "typeString": "bytes"
                                        }
                                      }
                                    },
                                    "id": 6785,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": true,
                                    "kind": "functionCall",
                                    "lValueRequested": false,
                                    "nameLocations": [],
                                    "names": [],
                                    "nodeType": "FunctionCall",
                                    "src": "3081:12:31",
                                    "tryCall": false,
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_bytes_memory_ptr",
                                      "typeString": "bytes memory"
                                    }
                                  }
                                ],
                                "expression": {
                                  "argumentTypes": [
                                    {
                                      "typeIdentifier": "t_bytes4",
                                      "typeString": "bytes4"
                                    },
                                    {
                                      "typeIdentifier": "t_contract$_ISuperfluidToken_$26072",
                                      "typeString": "contract ISuperfluidToken"
                                    },
                                    {
                                      "typeIdentifier": "t_address",
                                      "typeString": "address"
                                    },
                                    {
                                      "typeIdentifier": "t_bytes32",
                                      "typeString": "bytes32"
                                    },
                                    {
                                      "typeIdentifier": "t_bytes_memory_ptr",
                                      "typeString": "bytes memory"
                                    },
                                    {
                                      "typeIdentifier": "t_bytes_memory_ptr",
                                      "typeString": "bytes memory"
                                    }
                                  ],
                                  "expression": {
                                    "id": 6766,
                                    "name": "abi",
                                    "nodeType": "Identifier",
                                    "overloadedDeclarations": [],
                                    "referencedDeclaration": -1,
                                    "src": "2807:3:31",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_magic_abi",
                                      "typeString": "abi"
                                    }
                                  },
                                  "id": 6767,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": true,
                                  "lValueRequested": false,
                                  "memberLocation": "2811:18:31",
                                  "memberName": "encodeWithSelector",
                                  "nodeType": "MemberAccess",
                                  "src": "2807:22:31",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_function_abiencodewithselector_pure$_t_bytes4_$returns$_t_bytes_memory_ptr_$",
                                    "typeString": "function (bytes4) pure returns (bytes memory)"
                                  }
                                },
                                "id": 6786,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": false,
                                "kind": "functionCall",
                                "lValueRequested": false,
                                "nameLocations": [],
                                "names": [],
                                "nodeType": "FunctionCall",
                                "src": "2807:323:31",
                                "tryCall": false,
                                "typeDescriptions": {
                                  "typeIdentifier": "t_bytes_memory_ptr",
                                  "typeString": "bytes memory"
                                }
                              },
                              "nodeType": "VariableDeclarationStatement",
                              "src": "2783:347:31"
                            },
                            {
                              "expression": {
                                "id": 6806,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": false,
                                "lValueRequested": false,
                                "leftHandSide": {
                                  "id": 6788,
                                  "name": "cbdata",
                                  "nodeType": "Identifier",
                                  "overloadedDeclarations": [],
                                  "referencedDeclaration": 6719,
                                  "src": "3148:6:31",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_bytes_memory_ptr",
                                    "typeString": "bytes memory"
                                  }
                                },
                                "nodeType": "Assignment",
                                "operator": "=",
                                "rightHandSide": {
                                  "arguments": [
                                    {
                                      "arguments": [
                                        {
                                          "expression": {
                                            "id": 6795,
                                            "name": "inputs",
                                            "nodeType": "Identifier",
                                            "overloadedDeclarations": [],
                                            "referencedDeclaration": 6714,
                                            "src": "3234:6:31",
                                            "typeDescriptions": {
                                              "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                                              "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                            }
                                          },
                                          "id": 6796,
                                          "isConstant": false,
                                          "isLValue": true,
                                          "isPure": false,
                                          "lValueRequested": false,
                                          "memberLocation": "3241:7:31",
                                          "memberName": "account",
                                          "nodeType": "MemberAccess",
                                          "referencedDeclaration": 6660,
                                          "src": "3234:14:31",
                                          "typeDescriptions": {
                                            "typeIdentifier": "t_address",
                                            "typeString": "address"
                                          }
                                        }
                                      ],
                                      "expression": {
                                        "argumentTypes": [
                                          {
                                            "typeIdentifier": "t_address",
                                            "typeString": "address"
                                          }
                                        ],
                                        "id": 6794,
                                        "name": "ISuperApp",
                                        "nodeType": "Identifier",
                                        "overloadedDeclarations": [],
                                        "referencedDeclaration": 24506,
                                        "src": "3224:9:31",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_type$_t_contract$_ISuperApp_$24506_$",
                                          "typeString": "type(contract ISuperApp)"
                                        }
                                      },
                                      "id": 6797,
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": false,
                                      "kind": "typeConversion",
                                      "lValueRequested": false,
                                      "nameLocations": [],
                                      "names": [],
                                      "nodeType": "FunctionCall",
                                      "src": "3224:25:31",
                                      "tryCall": false,
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_contract$_ISuperApp_$24506",
                                        "typeString": "contract ISuperApp"
                                      }
                                    },
                                    {
                                      "id": 6798,
                                      "name": "callData",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 6765,
                                      "src": "3271:8:31",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_bytes_memory_ptr",
                                        "typeString": "bytes memory"
                                      }
                                    },
                                    {
                                      "commonType": {
                                        "typeIdentifier": "t_uint256",
                                        "typeString": "uint256"
                                      },
                                      "id": 6803,
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": false,
                                      "lValueRequested": false,
                                      "leftExpression": {
                                        "expression": {
                                          "id": 6799,
                                          "name": "inputs",
                                          "nodeType": "Identifier",
                                          "overloadedDeclarations": [],
                                          "referencedDeclaration": 6714,
                                          "src": "3301:6:31",
                                          "typeDescriptions": {
                                            "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                                            "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                          }
                                        },
                                        "id": 6800,
                                        "isConstant": false,
                                        "isLValue": true,
                                        "isPure": false,
                                        "lValueRequested": false,
                                        "memberLocation": "3308:7:31",
                                        "memberName": "noopBit",
                                        "nodeType": "MemberAccess",
                                        "referencedDeclaration": 6670,
                                        "src": "3301:14:31",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_uint256",
                                          "typeString": "uint256"
                                        }
                                      },
                                      "nodeType": "BinaryOperation",
                                      "operator": "==",
                                      "rightExpression": {
                                        "expression": {
                                          "id": 6801,
                                          "name": "SuperAppDefinitions",
                                          "nodeType": "Identifier",
                                          "overloadedDeclarations": [],
                                          "referencedDeclaration": 23898,
                                          "src": "3319:19:31",
                                          "typeDescriptions": {
                                            "typeIdentifier": "t_type$_t_contract$_SuperAppDefinitions_$23898_$",
                                            "typeString": "type(library SuperAppDefinitions)"
                                          }
                                        },
                                        "id": 6802,
                                        "isConstant": false,
                                        "isLValue": false,
                                        "isPure": true,
                                        "lValueRequested": false,
                                        "memberLocation": "3339:32:31",
                                        "memberName": "BEFORE_AGREEMENT_TERMINATED_NOOP",
                                        "nodeType": "MemberAccess",
                                        "referencedDeclaration": 23832,
                                        "src": "3319:52:31",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_uint256",
                                          "typeString": "uint256"
                                        }
                                      },
                                      "src": "3301:70:31",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_bool",
                                        "typeString": "bool"
                                      }
                                    },
                                    {
                                      "id": 6804,
                                      "name": "appCtx",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 6751,
                                      "src": "3393:6:31",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_bytes_memory_ptr",
                                        "typeString": "bytes memory"
                                      }
                                    }
                                  ],
                                  "expression": {
                                    "argumentTypes": [
                                      {
                                        "typeIdentifier": "t_contract$_ISuperApp_$24506",
                                        "typeString": "contract ISuperApp"
                                      },
                                      {
                                        "typeIdentifier": "t_bytes_memory_ptr",
                                        "typeString": "bytes memory"
                                      },
                                      {
                                        "typeIdentifier": "t_bool",
                                        "typeString": "bool"
                                      },
                                      {
                                        "typeIdentifier": "t_bytes_memory_ptr",
                                        "typeString": "bytes memory"
                                      }
                                    ],
                                    "expression": {
                                      "arguments": [
                                        {
                                          "expression": {
                                            "id": 6790,
                                            "name": "msg",
                                            "nodeType": "Identifier",
                                            "overloadedDeclarations": [],
                                            "referencedDeclaration": -15,
                                            "src": "3169:3:31",
                                            "typeDescriptions": {
                                              "typeIdentifier": "t_magic_message",
                                              "typeString": "msg"
                                            }
                                          },
                                          "id": 6791,
                                          "isConstant": false,
                                          "isLValue": false,
                                          "isPure": false,
                                          "lValueRequested": false,
                                          "memberLocation": "3173:6:31",
                                          "memberName": "sender",
                                          "nodeType": "MemberAccess",
                                          "src": "3169:10:31",
                                          "typeDescriptions": {
                                            "typeIdentifier": "t_address",
                                            "typeString": "address"
                                          }
                                        }
                                      ],
                                      "expression": {
                                        "argumentTypes": [
                                          {
                                            "typeIdentifier": "t_address",
                                            "typeString": "address"
                                          }
                                        ],
                                        "id": 6789,
                                        "name": "ISuperfluid",
                                        "nodeType": "Identifier",
                                        "overloadedDeclarations": [],
                                        "referencedDeclaration": 25647,
                                        "src": "3157:11:31",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_type$_t_contract$_ISuperfluid_$25647_$",
                                          "typeString": "type(contract ISuperfluid)"
                                        }
                                      },
                                      "id": 6792,
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": false,
                                      "kind": "typeConversion",
                                      "lValueRequested": false,
                                      "nameLocations": [],
                                      "names": [],
                                      "nodeType": "FunctionCall",
                                      "src": "3157:23:31",
                                      "tryCall": false,
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_contract$_ISuperfluid_$25647",
                                        "typeString": "contract ISuperfluid"
                                      }
                                    },
                                    "id": 6793,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": false,
                                    "lValueRequested": false,
                                    "memberLocation": "3181:21:31",
                                    "memberName": "callAppBeforeCallback",
                                    "nodeType": "MemberAccess",
                                    "referencedDeclaration": 25458,
                                    "src": "3157:45:31",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_function_external_nonpayable$_t_contract$_ISuperApp_$24506_$_t_bytes_memory_ptr_$_t_bool_$_t_bytes_memory_ptr_$returns$_t_bytes_memory_ptr_$",
                                      "typeString": "function (contract ISuperApp,bytes memory,bool,bytes memory) external returns (bytes memory)"
                                    }
                                  },
                                  "id": 6805,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": false,
                                  "kind": "functionCall",
                                  "lValueRequested": false,
                                  "nameLocations": [],
                                  "names": [],
                                  "nodeType": "FunctionCall",
                                  "src": "3157:243:31",
                                  "tryCall": false,
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_bytes_memory_ptr",
                                    "typeString": "bytes memory"
                                  }
                                },
                                "src": "3148:252:31",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_bytes_memory_ptr",
                                  "typeString": "bytes memory"
                                }
                              },
                              "id": 6807,
                              "nodeType": "ExpressionStatement",
                              "src": "3148:252:31"
                            }
                          ]
                        }
                      },
                      {
                        "expression": {
                          "arguments": [
                            {
                              "id": 6811,
                              "name": "ctx",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 6716,
                              "src": "3558:3:31",
                              "typeDescriptions": {
                                "typeIdentifier": "t_bytes_memory_ptr",
                                "typeString": "bytes memory"
                              }
                            },
                            {
                              "hexValue": "30",
                              "id": 6812,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": true,
                              "kind": "number",
                              "lValueRequested": false,
                              "nodeType": "Literal",
                              "src": "3563:1:31",
                              "typeDescriptions": {
                                "typeIdentifier": "t_rational_0_by_1",
                                "typeString": "int_const 0"
                              },
                              "value": "0"
                            }
                          ],
                          "expression": {
                            "argumentTypes": [
                              {
                                "typeIdentifier": "t_bytes_memory_ptr",
                                "typeString": "bytes memory"
                              },
                              {
                                "typeIdentifier": "t_rational_0_by_1",
                                "typeString": "int_const 0"
                              }
                            ],
                            "id": 6810,
                            "name": "_popCallbackStack",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 7093,
                            "src": "3540:17:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_function_internal_nonpayable$_t_bytes_memory_ptr_$_t_int256_$returns$_t_bytes_memory_ptr_$",
                              "typeString": "function (bytes memory,int256) returns (bytes memory)"
                            }
                          },
                          "id": 6813,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "kind": "functionCall",
                          "lValueRequested": false,
                          "nameLocations": [],
                          "names": [],
                          "nodeType": "FunctionCall",
                          "src": "3540:25:31",
                          "tryCall": false,
                          "typeDescriptions": {
                            "typeIdentifier": "t_bytes_memory_ptr",
                            "typeString": "bytes memory"
                          }
                        },
                        "id": 6814,
                        "nodeType": "ExpressionStatement",
                        "src": "3540:25:31"
                      }
                    ]
                  }
                }
              ]
            },
            "id": 6818,
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "callAppBeforeCallback",
            "nameLocation": "2273:21:31",
            "nodeType": "FunctionDefinition",
            "parameters": {
              "id": 6717,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 6714,
                  "mutability": "mutable",
                  "name": "inputs",
                  "nameLocation": "2326:6:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 6818,
                  "src": "2304:28:31",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                    "typeString": "struct AgreementLibrary.CallbackInputs"
                  },
                  "typeName": {
                    "id": 6713,
                    "nodeType": "UserDefinedTypeName",
                    "pathNode": {
                      "id": 6712,
                      "name": "CallbackInputs",
                      "nameLocations": [
                        "2304:14:31"
                      ],
                      "nodeType": "IdentifierPath",
                      "referencedDeclaration": 6671,
                      "src": "2304:14:31"
                    },
                    "referencedDeclaration": 6671,
                    "src": "2304:14:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_struct$_CallbackInputs_$6671_storage_ptr",
                      "typeString": "struct AgreementLibrary.CallbackInputs"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 6716,
                  "mutability": "mutable",
                  "name": "ctx",
                  "nameLocation": "2355:3:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 6818,
                  "src": "2342:16:31",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes_memory_ptr",
                    "typeString": "bytes"
                  },
                  "typeName": {
                    "id": 6715,
                    "name": "bytes",
                    "nodeType": "ElementaryTypeName",
                    "src": "2342:5:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_storage_ptr",
                      "typeString": "bytes"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "2294:70:31"
            },
            "returnParameters": {
              "id": 6720,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 6719,
                  "mutability": "mutable",
                  "name": "cbdata",
                  "nameLocation": "2411:6:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 6818,
                  "src": "2398:19:31",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes_memory_ptr",
                    "typeString": "bytes"
                  },
                  "typeName": {
                    "id": 6718,
                    "name": "bytes",
                    "nodeType": "ElementaryTypeName",
                    "src": "2398:5:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_storage_ptr",
                      "typeString": "bytes"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "2397:21:31"
            },
            "scope": 7145,
            "src": "2264:1318:31",
            "stateMutability": "nonpayable",
            "virtual": false,
            "visibility": "internal"
          },
          {
            "body": {
              "id": 6958,
              "nodeType": "Block",
              "src": "3827:1566:31",
              "statements": [
                {
                  "assignments": [
                    6834
                  ],
                  "declarations": [
                    {
                      "constant": false,
                      "id": 6834,
                      "mutability": "mutable",
                      "name": "isSuperApp",
                      "nameLocation": "3842:10:31",
                      "nodeType": "VariableDeclaration",
                      "scope": 6958,
                      "src": "3837:15:31",
                      "stateVariable": false,
                      "storageLocation": "default",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bool",
                        "typeString": "bool"
                      },
                      "typeName": {
                        "id": 6833,
                        "name": "bool",
                        "nodeType": "ElementaryTypeName",
                        "src": "3837:4:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      },
                      "visibility": "internal"
                    }
                  ],
                  "id": 6835,
                  "nodeType": "VariableDeclarationStatement",
                  "src": "3837:15:31"
                },
                {
                  "assignments": [
                    6837
                  ],
                  "declarations": [
                    {
                      "constant": false,
                      "id": 6837,
                      "mutability": "mutable",
                      "name": "isJailed",
                      "nameLocation": "3867:8:31",
                      "nodeType": "VariableDeclaration",
                      "scope": 6958,
                      "src": "3862:13:31",
                      "stateVariable": false,
                      "storageLocation": "default",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bool",
                        "typeString": "bool"
                      },
                      "typeName": {
                        "id": 6836,
                        "name": "bool",
                        "nodeType": "ElementaryTypeName",
                        "src": "3862:4:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      },
                      "visibility": "internal"
                    }
                  ],
                  "id": 6838,
                  "nodeType": "VariableDeclarationStatement",
                  "src": "3862:13:31"
                },
                {
                  "assignments": [
                    6840
                  ],
                  "declarations": [
                    {
                      "constant": false,
                      "id": 6840,
                      "mutability": "mutable",
                      "name": "noopMask",
                      "nameLocation": "3893:8:31",
                      "nodeType": "VariableDeclaration",
                      "scope": 6958,
                      "src": "3885:16:31",
                      "stateVariable": false,
                      "storageLocation": "default",
                      "typeDescriptions": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      },
                      "typeName": {
                        "id": 6839,
                        "name": "uint256",
                        "nodeType": "ElementaryTypeName",
                        "src": "3885:7:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      "visibility": "internal"
                    }
                  ],
                  "id": 6841,
                  "nodeType": "VariableDeclarationStatement",
                  "src": "3885:16:31"
                },
                {
                  "expression": {
                    "id": 6856,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftHandSide": {
                      "components": [
                        {
                          "id": 6842,
                          "name": "isSuperApp",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 6834,
                          "src": "3912:10:31",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bool",
                            "typeString": "bool"
                          }
                        },
                        {
                          "id": 6843,
                          "name": "isJailed",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 6837,
                          "src": "3924:8:31",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bool",
                            "typeString": "bool"
                          }
                        },
                        {
                          "id": 6844,
                          "name": "noopMask",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 6840,
                          "src": "3934:8:31",
                          "typeDescriptions": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          }
                        }
                      ],
                      "id": 6845,
                      "isConstant": false,
                      "isInlineArray": false,
                      "isLValue": true,
                      "isPure": false,
                      "lValueRequested": true,
                      "nodeType": "TupleExpression",
                      "src": "3911:32:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_tuple$_t_bool_$_t_bool_$_t_uint256_$",
                        "typeString": "tuple(bool,bool,uint256)"
                      }
                    },
                    "nodeType": "Assignment",
                    "operator": "=",
                    "rightHandSide": {
                      "arguments": [
                        {
                          "arguments": [
                            {
                              "expression": {
                                "id": 6852,
                                "name": "inputs",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 6821,
                                "src": "3995:6:31",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                                  "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                }
                              },
                              "id": 6853,
                              "isConstant": false,
                              "isLValue": true,
                              "isPure": false,
                              "lValueRequested": false,
                              "memberLocation": "4002:7:31",
                              "memberName": "account",
                              "nodeType": "MemberAccess",
                              "referencedDeclaration": 6660,
                              "src": "3995:14:31",
                              "typeDescriptions": {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            }
                          ],
                          "expression": {
                            "argumentTypes": [
                              {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            ],
                            "id": 6851,
                            "name": "ISuperApp",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 24506,
                            "src": "3985:9:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_type$_t_contract$_ISuperApp_$24506_$",
                              "typeString": "type(contract ISuperApp)"
                            }
                          },
                          "id": 6854,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "kind": "typeConversion",
                          "lValueRequested": false,
                          "nameLocations": [],
                          "names": [],
                          "nodeType": "FunctionCall",
                          "src": "3985:25:31",
                          "tryCall": false,
                          "typeDescriptions": {
                            "typeIdentifier": "t_contract$_ISuperApp_$24506",
                            "typeString": "contract ISuperApp"
                          }
                        }
                      ],
                      "expression": {
                        "argumentTypes": [
                          {
                            "typeIdentifier": "t_contract$_ISuperApp_$24506",
                            "typeString": "contract ISuperApp"
                          }
                        ],
                        "expression": {
                          "arguments": [
                            {
                              "expression": {
                                "id": 6847,
                                "name": "msg",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": -15,
                                "src": "3958:3:31",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_magic_message",
                                  "typeString": "msg"
                                }
                              },
                              "id": 6848,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "lValueRequested": false,
                              "memberLocation": "3962:6:31",
                              "memberName": "sender",
                              "nodeType": "MemberAccess",
                              "src": "3958:10:31",
                              "typeDescriptions": {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            }
                          ],
                          "expression": {
                            "argumentTypes": [
                              {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            ],
                            "id": 6846,
                            "name": "ISuperfluid",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 25647,
                            "src": "3946:11:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_type$_t_contract$_ISuperfluid_$25647_$",
                              "typeString": "type(contract ISuperfluid)"
                            }
                          },
                          "id": 6849,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "kind": "typeConversion",
                          "lValueRequested": false,
                          "nameLocations": [],
                          "names": [],
                          "nodeType": "FunctionCall",
                          "src": "3946:23:31",
                          "tryCall": false,
                          "typeDescriptions": {
                            "typeIdentifier": "t_contract$_ISuperfluid_$25647",
                            "typeString": "contract ISuperfluid"
                          }
                        },
                        "id": 6850,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "lValueRequested": false,
                        "memberLocation": "3970:14:31",
                        "memberName": "getAppManifest",
                        "nodeType": "MemberAccess",
                        "referencedDeclaration": 25415,
                        "src": "3946:38:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_function_external_view$_t_contract$_ISuperApp_$24506_$returns$_t_bool_$_t_bool_$_t_uint256_$",
                          "typeString": "function (contract ISuperApp) view external returns (bool,bool,uint256)"
                        }
                      },
                      "id": 6855,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "kind": "functionCall",
                      "lValueRequested": false,
                      "nameLocations": [],
                      "names": [],
                      "nodeType": "FunctionCall",
                      "src": "3946:65:31",
                      "tryCall": false,
                      "typeDescriptions": {
                        "typeIdentifier": "t_tuple$_t_bool_$_t_bool_$_t_uint256_$",
                        "typeString": "tuple(bool,bool,uint256)"
                      }
                    },
                    "src": "3911:100:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_tuple$__$",
                      "typeString": "tuple()"
                    }
                  },
                  "id": 6857,
                  "nodeType": "ExpressionStatement",
                  "src": "3911:100:31"
                },
                {
                  "expression": {
                    "id": 6860,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftHandSide": {
                      "id": 6858,
                      "name": "newCtx",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 6831,
                      "src": "4022:6:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bytes_memory_ptr",
                        "typeString": "bytes memory"
                      }
                    },
                    "nodeType": "Assignment",
                    "operator": "=",
                    "rightHandSide": {
                      "id": 6859,
                      "name": "ctx",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 6825,
                      "src": "4031:3:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bytes_memory_ptr",
                        "typeString": "bytes memory"
                      }
                    },
                    "src": "4022:12:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_memory_ptr",
                      "typeString": "bytes memory"
                    }
                  },
                  "id": 6861,
                  "nodeType": "ExpressionStatement",
                  "src": "4022:12:31"
                },
                {
                  "condition": {
                    "commonType": {
                      "typeIdentifier": "t_bool",
                      "typeString": "bool"
                    },
                    "id": 6865,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftExpression": {
                      "id": 6862,
                      "name": "isSuperApp",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 6834,
                      "src": "4048:10:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bool",
                        "typeString": "bool"
                      }
                    },
                    "nodeType": "BinaryOperation",
                    "operator": "&&",
                    "rightExpression": {
                      "id": 6864,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "lValueRequested": false,
                      "nodeType": "UnaryOperation",
                      "operator": "!",
                      "prefix": true,
                      "src": "4062:9:31",
                      "subExpression": {
                        "id": 6863,
                        "name": "isJailed",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 6837,
                        "src": "4063:8:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      },
                      "typeDescriptions": {
                        "typeIdentifier": "t_bool",
                        "typeString": "bool"
                      }
                    },
                    "src": "4048:23:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bool",
                      "typeString": "bool"
                    }
                  },
                  "id": 6957,
                  "nodeType": "IfStatement",
                  "src": "4044:1343:31",
                  "trueBody": {
                    "id": 6956,
                    "nodeType": "Block",
                    "src": "4073:1314:31",
                    "statements": [
                      {
                        "expression": {
                          "id": 6871,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "leftHandSide": {
                            "id": 6866,
                            "name": "newCtx",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 6831,
                            "src": "4087:6:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_bytes_memory_ptr",
                              "typeString": "bytes memory"
                            }
                          },
                          "nodeType": "Assignment",
                          "operator": "=",
                          "rightHandSide": {
                            "arguments": [
                              {
                                "id": 6868,
                                "name": "newCtx",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 6831,
                                "src": "4115:6:31",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_bytes_memory_ptr",
                                  "typeString": "bytes memory"
                                }
                              },
                              {
                                "id": 6869,
                                "name": "inputs",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 6821,
                                "src": "4123:6:31",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                                  "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                }
                              }
                            ],
                            "expression": {
                              "argumentTypes": [
                                {
                                  "typeIdentifier": "t_bytes_memory_ptr",
                                  "typeString": "bytes memory"
                                },
                                {
                                  "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                                  "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                }
                              ],
                              "id": 6867,
                              "name": "_pushCallbackStack",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 7074,
                              "src": "4096:18:31",
                              "typeDescriptions": {
                                "typeIdentifier": "t_function_internal_nonpayable$_t_bytes_memory_ptr_$_t_struct$_CallbackInputs_$6671_memory_ptr_$returns$_t_bytes_memory_ptr_$",
                                "typeString": "function (bytes memory,struct AgreementLibrary.CallbackInputs memory) returns (bytes memory)"
                              }
                            },
                            "id": 6870,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": false,
                            "kind": "functionCall",
                            "lValueRequested": false,
                            "nameLocations": [],
                            "names": [],
                            "nodeType": "FunctionCall",
                            "src": "4096:34:31",
                            "tryCall": false,
                            "typeDescriptions": {
                              "typeIdentifier": "t_bytes_memory_ptr",
                              "typeString": "bytes memory"
                            }
                          },
                          "src": "4087:43:31",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bytes_memory_ptr",
                            "typeString": "bytes memory"
                          }
                        },
                        "id": 6872,
                        "nodeType": "ExpressionStatement",
                        "src": "4087:43:31"
                      },
                      {
                        "condition": {
                          "commonType": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          },
                          "id": 6879,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "leftExpression": {
                            "components": [
                              {
                                "commonType": {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                },
                                "id": 6876,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": false,
                                "lValueRequested": false,
                                "leftExpression": {
                                  "id": 6873,
                                  "name": "noopMask",
                                  "nodeType": "Identifier",
                                  "overloadedDeclarations": [],
                                  "referencedDeclaration": 6840,
                                  "src": "4149:8:31",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_uint256",
                                    "typeString": "uint256"
                                  }
                                },
                                "nodeType": "BinaryOperation",
                                "operator": "&",
                                "rightExpression": {
                                  "expression": {
                                    "id": 6874,
                                    "name": "inputs",
                                    "nodeType": "Identifier",
                                    "overloadedDeclarations": [],
                                    "referencedDeclaration": 6821,
                                    "src": "4160:6:31",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                                      "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                    }
                                  },
                                  "id": 6875,
                                  "isConstant": false,
                                  "isLValue": true,
                                  "isPure": false,
                                  "lValueRequested": false,
                                  "memberLocation": "4167:7:31",
                                  "memberName": "noopBit",
                                  "nodeType": "MemberAccess",
                                  "referencedDeclaration": 6670,
                                  "src": "4160:14:31",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_uint256",
                                    "typeString": "uint256"
                                  }
                                },
                                "src": "4149:25:31",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                }
                              }
                            ],
                            "id": 6877,
                            "isConstant": false,
                            "isInlineArray": false,
                            "isLValue": false,
                            "isPure": false,
                            "lValueRequested": false,
                            "nodeType": "TupleExpression",
                            "src": "4148:27:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "nodeType": "BinaryOperation",
                          "operator": "==",
                          "rightExpression": {
                            "hexValue": "30",
                            "id": 6878,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": true,
                            "kind": "number",
                            "lValueRequested": false,
                            "nodeType": "Literal",
                            "src": "4179:1:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_rational_0_by_1",
                              "typeString": "int_const 0"
                            },
                            "value": "0"
                          },
                          "src": "4148:32:31",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bool",
                            "typeString": "bool"
                          }
                        },
                        "id": 6947,
                        "nodeType": "IfStatement",
                        "src": "4144:1050:31",
                        "trueBody": {
                          "id": 6946,
                          "nodeType": "Block",
                          "src": "4182:1012:31",
                          "statements": [
                            {
                              "assignments": [
                                6881
                              ],
                              "declarations": [
                                {
                                  "constant": false,
                                  "id": 6881,
                                  "mutability": "mutable",
                                  "name": "callData",
                                  "nameLocation": "4213:8:31",
                                  "nodeType": "VariableDeclaration",
                                  "scope": 6946,
                                  "src": "4200:21:31",
                                  "stateVariable": false,
                                  "storageLocation": "memory",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_bytes_memory_ptr",
                                    "typeString": "bytes"
                                  },
                                  "typeName": {
                                    "id": 6880,
                                    "name": "bytes",
                                    "nodeType": "ElementaryTypeName",
                                    "src": "4200:5:31",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_bytes_storage_ptr",
                                      "typeString": "bytes"
                                    }
                                  },
                                  "visibility": "internal"
                                }
                              ],
                              "id": 6904,
                              "initialValue": {
                                "arguments": [
                                  {
                                    "arguments": [
                                      {
                                        "expression": {
                                          "id": 6885,
                                          "name": "inputs",
                                          "nodeType": "Identifier",
                                          "overloadedDeclarations": [],
                                          "referencedDeclaration": 6821,
                                          "src": "4289:6:31",
                                          "typeDescriptions": {
                                            "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                                            "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                          }
                                        },
                                        "id": 6886,
                                        "isConstant": false,
                                        "isLValue": true,
                                        "isPure": false,
                                        "lValueRequested": false,
                                        "memberLocation": "4296:7:31",
                                        "memberName": "noopBit",
                                        "nodeType": "MemberAccess",
                                        "referencedDeclaration": 6670,
                                        "src": "4289:14:31",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_uint256",
                                          "typeString": "uint256"
                                        }
                                      }
                                    ],
                                    "expression": {
                                      "argumentTypes": [
                                        {
                                          "typeIdentifier": "t_uint256",
                                          "typeString": "uint256"
                                        }
                                      ],
                                      "id": 6884,
                                      "name": "_selectorFromNoopBit",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 7043,
                                      "src": "4268:20:31",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_function_internal_pure$_t_uint256_$returns$_t_bytes4_$",
                                        "typeString": "function (uint256) pure returns (bytes4)"
                                      }
                                    },
                                    "id": 6887,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": false,
                                    "kind": "functionCall",
                                    "lValueRequested": false,
                                    "nameLocations": [],
                                    "names": [],
                                    "nodeType": "FunctionCall",
                                    "src": "4268:36:31",
                                    "tryCall": false,
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_bytes4",
                                      "typeString": "bytes4"
                                    }
                                  },
                                  {
                                    "expression": {
                                      "id": 6888,
                                      "name": "inputs",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 6821,
                                      "src": "4326:6:31",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                                        "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                      }
                                    },
                                    "id": 6889,
                                    "isConstant": false,
                                    "isLValue": true,
                                    "isPure": false,
                                    "lValueRequested": false,
                                    "memberLocation": "4333:5:31",
                                    "memberName": "token",
                                    "nodeType": "MemberAccess",
                                    "referencedDeclaration": 6658,
                                    "src": "4326:12:31",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_contract$_ISuperfluidToken_$26072",
                                      "typeString": "contract ISuperfluidToken"
                                    }
                                  },
                                  {
                                    "arguments": [
                                      {
                                        "id": 6892,
                                        "name": "this",
                                        "nodeType": "Identifier",
                                        "overloadedDeclarations": [],
                                        "referencedDeclaration": -28,
                                        "src": "4368:4:31",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_contract$_AgreementLibrary_$7145",
                                          "typeString": "library AgreementLibrary"
                                        }
                                      }
                                    ],
                                    "expression": {
                                      "argumentTypes": [
                                        {
                                          "typeIdentifier": "t_contract$_AgreementLibrary_$7145",
                                          "typeString": "library AgreementLibrary"
                                        }
                                      ],
                                      "id": 6891,
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": true,
                                      "lValueRequested": false,
                                      "nodeType": "ElementaryTypeNameExpression",
                                      "src": "4360:7:31",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_type$_t_address_$",
                                        "typeString": "type(address)"
                                      },
                                      "typeName": {
                                        "id": 6890,
                                        "name": "address",
                                        "nodeType": "ElementaryTypeName",
                                        "src": "4360:7:31",
                                        "typeDescriptions": {}
                                      }
                                    },
                                    "id": 6893,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": false,
                                    "kind": "typeConversion",
                                    "lValueRequested": false,
                                    "nameLocations": [],
                                    "names": [],
                                    "nodeType": "FunctionCall",
                                    "src": "4360:13:31",
                                    "tryCall": false,
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_address",
                                      "typeString": "address"
                                    }
                                  },
                                  {
                                    "expression": {
                                      "id": 6894,
                                      "name": "inputs",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 6821,
                                      "src": "4416:6:31",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                                        "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                      }
                                    },
                                    "id": 6895,
                                    "isConstant": false,
                                    "isLValue": true,
                                    "isPure": false,
                                    "lValueRequested": false,
                                    "memberLocation": "4423:11:31",
                                    "memberName": "agreementId",
                                    "nodeType": "MemberAccess",
                                    "referencedDeclaration": 6662,
                                    "src": "4416:18:31",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_bytes32",
                                      "typeString": "bytes32"
                                    }
                                  },
                                  {
                                    "expression": {
                                      "id": 6896,
                                      "name": "inputs",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 6821,
                                      "src": "4456:6:31",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                                        "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                      }
                                    },
                                    "id": 6897,
                                    "isConstant": false,
                                    "isLValue": true,
                                    "isPure": false,
                                    "lValueRequested": false,
                                    "memberLocation": "4463:13:31",
                                    "memberName": "agreementData",
                                    "nodeType": "MemberAccess",
                                    "referencedDeclaration": 6664,
                                    "src": "4456:20:31",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_bytes_memory_ptr",
                                      "typeString": "bytes memory"
                                    }
                                  },
                                  {
                                    "id": 6898,
                                    "name": "cbdata",
                                    "nodeType": "Identifier",
                                    "overloadedDeclarations": [],
                                    "referencedDeclaration": 6823,
                                    "src": "4498:6:31",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_bytes_memory_ptr",
                                      "typeString": "bytes memory"
                                    }
                                  },
                                  {
                                    "arguments": [
                                      {
                                        "hexValue": "30",
                                        "id": 6901,
                                        "isConstant": false,
                                        "isLValue": false,
                                        "isPure": true,
                                        "kind": "number",
                                        "lValueRequested": false,
                                        "nodeType": "Literal",
                                        "src": "4536:1:31",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_rational_0_by_1",
                                          "typeString": "int_const 0"
                                        },
                                        "value": "0"
                                      }
                                    ],
                                    "expression": {
                                      "argumentTypes": [
                                        {
                                          "typeIdentifier": "t_rational_0_by_1",
                                          "typeString": "int_const 0"
                                        }
                                      ],
                                      "id": 6900,
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": true,
                                      "lValueRequested": false,
                                      "nodeType": "NewExpression",
                                      "src": "4526:9:31",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_function_objectcreation_pure$_t_uint256_$returns$_t_bytes_memory_ptr_$",
                                        "typeString": "function (uint256) pure returns (bytes memory)"
                                      },
                                      "typeName": {
                                        "id": 6899,
                                        "name": "bytes",
                                        "nodeType": "ElementaryTypeName",
                                        "src": "4530:5:31",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_bytes_storage_ptr",
                                          "typeString": "bytes"
                                        }
                                      }
                                    },
                                    "id": 6902,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": true,
                                    "kind": "functionCall",
                                    "lValueRequested": false,
                                    "nameLocations": [],
                                    "names": [],
                                    "nodeType": "FunctionCall",
                                    "src": "4526:12:31",
                                    "tryCall": false,
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_bytes_memory_ptr",
                                      "typeString": "bytes memory"
                                    }
                                  }
                                ],
                                "expression": {
                                  "argumentTypes": [
                                    {
                                      "typeIdentifier": "t_bytes4",
                                      "typeString": "bytes4"
                                    },
                                    {
                                      "typeIdentifier": "t_contract$_ISuperfluidToken_$26072",
                                      "typeString": "contract ISuperfluidToken"
                                    },
                                    {
                                      "typeIdentifier": "t_address",
                                      "typeString": "address"
                                    },
                                    {
                                      "typeIdentifier": "t_bytes32",
                                      "typeString": "bytes32"
                                    },
                                    {
                                      "typeIdentifier": "t_bytes_memory_ptr",
                                      "typeString": "bytes memory"
                                    },
                                    {
                                      "typeIdentifier": "t_bytes_memory_ptr",
                                      "typeString": "bytes memory"
                                    },
                                    {
                                      "typeIdentifier": "t_bytes_memory_ptr",
                                      "typeString": "bytes memory"
                                    }
                                  ],
                                  "expression": {
                                    "id": 6882,
                                    "name": "abi",
                                    "nodeType": "Identifier",
                                    "overloadedDeclarations": [],
                                    "referencedDeclaration": -1,
                                    "src": "4224:3:31",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_magic_abi",
                                      "typeString": "abi"
                                    }
                                  },
                                  "id": 6883,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": true,
                                  "lValueRequested": false,
                                  "memberLocation": "4228:18:31",
                                  "memberName": "encodeWithSelector",
                                  "nodeType": "MemberAccess",
                                  "src": "4224:22:31",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_function_abiencodewithselector_pure$_t_bytes4_$returns$_t_bytes_memory_ptr_$",
                                    "typeString": "function (bytes4) pure returns (bytes memory)"
                                  }
                                },
                                "id": 6903,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": false,
                                "kind": "functionCall",
                                "lValueRequested": false,
                                "nameLocations": [],
                                "names": [],
                                "nodeType": "FunctionCall",
                                "src": "4224:351:31",
                                "tryCall": false,
                                "typeDescriptions": {
                                  "typeIdentifier": "t_bytes_memory_ptr",
                                  "typeString": "bytes memory"
                                }
                              },
                              "nodeType": "VariableDeclarationStatement",
                              "src": "4200:375:31"
                            },
                            {
                              "expression": {
                                "id": 6923,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": false,
                                "lValueRequested": false,
                                "leftHandSide": {
                                  "id": 6905,
                                  "name": "newCtx",
                                  "nodeType": "Identifier",
                                  "overloadedDeclarations": [],
                                  "referencedDeclaration": 6831,
                                  "src": "4593:6:31",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_bytes_memory_ptr",
                                    "typeString": "bytes memory"
                                  }
                                },
                                "nodeType": "Assignment",
                                "operator": "=",
                                "rightHandSide": {
                                  "arguments": [
                                    {
                                      "arguments": [
                                        {
                                          "expression": {
                                            "id": 6912,
                                            "name": "inputs",
                                            "nodeType": "Identifier",
                                            "overloadedDeclarations": [],
                                            "referencedDeclaration": 6821,
                                            "src": "4678:6:31",
                                            "typeDescriptions": {
                                              "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                                              "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                            }
                                          },
                                          "id": 6913,
                                          "isConstant": false,
                                          "isLValue": true,
                                          "isPure": false,
                                          "lValueRequested": false,
                                          "memberLocation": "4685:7:31",
                                          "memberName": "account",
                                          "nodeType": "MemberAccess",
                                          "referencedDeclaration": 6660,
                                          "src": "4678:14:31",
                                          "typeDescriptions": {
                                            "typeIdentifier": "t_address",
                                            "typeString": "address"
                                          }
                                        }
                                      ],
                                      "expression": {
                                        "argumentTypes": [
                                          {
                                            "typeIdentifier": "t_address",
                                            "typeString": "address"
                                          }
                                        ],
                                        "id": 6911,
                                        "name": "ISuperApp",
                                        "nodeType": "Identifier",
                                        "overloadedDeclarations": [],
                                        "referencedDeclaration": 24506,
                                        "src": "4668:9:31",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_type$_t_contract$_ISuperApp_$24506_$",
                                          "typeString": "type(contract ISuperApp)"
                                        }
                                      },
                                      "id": 6914,
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": false,
                                      "kind": "typeConversion",
                                      "lValueRequested": false,
                                      "nameLocations": [],
                                      "names": [],
                                      "nodeType": "FunctionCall",
                                      "src": "4668:25:31",
                                      "tryCall": false,
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_contract$_ISuperApp_$24506",
                                        "typeString": "contract ISuperApp"
                                      }
                                    },
                                    {
                                      "id": 6915,
                                      "name": "callData",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 6881,
                                      "src": "4715:8:31",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_bytes_memory_ptr",
                                        "typeString": "bytes memory"
                                      }
                                    },
                                    {
                                      "commonType": {
                                        "typeIdentifier": "t_uint256",
                                        "typeString": "uint256"
                                      },
                                      "id": 6920,
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": false,
                                      "lValueRequested": false,
                                      "leftExpression": {
                                        "expression": {
                                          "id": 6916,
                                          "name": "inputs",
                                          "nodeType": "Identifier",
                                          "overloadedDeclarations": [],
                                          "referencedDeclaration": 6821,
                                          "src": "4745:6:31",
                                          "typeDescriptions": {
                                            "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                                            "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                          }
                                        },
                                        "id": 6917,
                                        "isConstant": false,
                                        "isLValue": true,
                                        "isPure": false,
                                        "lValueRequested": false,
                                        "memberLocation": "4752:7:31",
                                        "memberName": "noopBit",
                                        "nodeType": "MemberAccess",
                                        "referencedDeclaration": 6670,
                                        "src": "4745:14:31",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_uint256",
                                          "typeString": "uint256"
                                        }
                                      },
                                      "nodeType": "BinaryOperation",
                                      "operator": "==",
                                      "rightExpression": {
                                        "expression": {
                                          "id": 6918,
                                          "name": "SuperAppDefinitions",
                                          "nodeType": "Identifier",
                                          "overloadedDeclarations": [],
                                          "referencedDeclaration": 23898,
                                          "src": "4763:19:31",
                                          "typeDescriptions": {
                                            "typeIdentifier": "t_type$_t_contract$_SuperAppDefinitions_$23898_$",
                                            "typeString": "type(library SuperAppDefinitions)"
                                          }
                                        },
                                        "id": 6919,
                                        "isConstant": false,
                                        "isLValue": false,
                                        "isPure": true,
                                        "lValueRequested": false,
                                        "memberLocation": "4783:31:31",
                                        "memberName": "AFTER_AGREEMENT_TERMINATED_NOOP",
                                        "nodeType": "MemberAccess",
                                        "referencedDeclaration": 23840,
                                        "src": "4763:51:31",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_uint256",
                                          "typeString": "uint256"
                                        }
                                      },
                                      "src": "4745:69:31",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_bool",
                                        "typeString": "bool"
                                      }
                                    },
                                    {
                                      "id": 6921,
                                      "name": "newCtx",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 6831,
                                      "src": "4836:6:31",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_bytes_memory_ptr",
                                        "typeString": "bytes memory"
                                      }
                                    }
                                  ],
                                  "expression": {
                                    "argumentTypes": [
                                      {
                                        "typeIdentifier": "t_contract$_ISuperApp_$24506",
                                        "typeString": "contract ISuperApp"
                                      },
                                      {
                                        "typeIdentifier": "t_bytes_memory_ptr",
                                        "typeString": "bytes memory"
                                      },
                                      {
                                        "typeIdentifier": "t_bool",
                                        "typeString": "bool"
                                      },
                                      {
                                        "typeIdentifier": "t_bytes_memory_ptr",
                                        "typeString": "bytes memory"
                                      }
                                    ],
                                    "expression": {
                                      "arguments": [
                                        {
                                          "expression": {
                                            "id": 6907,
                                            "name": "msg",
                                            "nodeType": "Identifier",
                                            "overloadedDeclarations": [],
                                            "referencedDeclaration": -15,
                                            "src": "4614:3:31",
                                            "typeDescriptions": {
                                              "typeIdentifier": "t_magic_message",
                                              "typeString": "msg"
                                            }
                                          },
                                          "id": 6908,
                                          "isConstant": false,
                                          "isLValue": false,
                                          "isPure": false,
                                          "lValueRequested": false,
                                          "memberLocation": "4618:6:31",
                                          "memberName": "sender",
                                          "nodeType": "MemberAccess",
                                          "src": "4614:10:31",
                                          "typeDescriptions": {
                                            "typeIdentifier": "t_address",
                                            "typeString": "address"
                                          }
                                        }
                                      ],
                                      "expression": {
                                        "argumentTypes": [
                                          {
                                            "typeIdentifier": "t_address",
                                            "typeString": "address"
                                          }
                                        ],
                                        "id": 6906,
                                        "name": "ISuperfluid",
                                        "nodeType": "Identifier",
                                        "overloadedDeclarations": [],
                                        "referencedDeclaration": 25647,
                                        "src": "4602:11:31",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_type$_t_contract$_ISuperfluid_$25647_$",
                                          "typeString": "type(contract ISuperfluid)"
                                        }
                                      },
                                      "id": 6909,
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": false,
                                      "kind": "typeConversion",
                                      "lValueRequested": false,
                                      "nameLocations": [],
                                      "names": [],
                                      "nodeType": "FunctionCall",
                                      "src": "4602:23:31",
                                      "tryCall": false,
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_contract$_ISuperfluid_$25647",
                                        "typeString": "contract ISuperfluid"
                                      }
                                    },
                                    "id": 6910,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": false,
                                    "lValueRequested": false,
                                    "memberLocation": "4626:20:31",
                                    "memberName": "callAppAfterCallback",
                                    "nodeType": "MemberAccess",
                                    "referencedDeclaration": 25473,
                                    "src": "4602:44:31",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_function_external_nonpayable$_t_contract$_ISuperApp_$24506_$_t_bytes_memory_ptr_$_t_bool_$_t_bytes_memory_ptr_$returns$_t_bytes_memory_ptr_$",
                                      "typeString": "function (contract ISuperApp,bytes memory,bool,bytes memory) external returns (bytes memory)"
                                    }
                                  },
                                  "id": 6922,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": false,
                                  "kind": "functionCall",
                                  "lValueRequested": false,
                                  "nameLocations": [],
                                  "names": [],
                                  "nodeType": "FunctionCall",
                                  "src": "4602:241:31",
                                  "tryCall": false,
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_bytes_memory_ptr",
                                    "typeString": "bytes memory"
                                  }
                                },
                                "src": "4593:250:31",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_bytes_memory_ptr",
                                  "typeString": "bytes memory"
                                }
                              },
                              "id": 6924,
                              "nodeType": "ExpressionStatement",
                              "src": "4593:250:31"
                            },
                            {
                              "expression": {
                                "id": 6933,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": false,
                                "lValueRequested": false,
                                "leftHandSide": {
                                  "id": 6925,
                                  "name": "appContext",
                                  "nodeType": "Identifier",
                                  "overloadedDeclarations": [],
                                  "referencedDeclaration": 6829,
                                  "src": "4862:10:31",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_struct$_Context_$25580_memory_ptr",
                                    "typeString": "struct ISuperfluid.Context memory"
                                  }
                                },
                                "nodeType": "Assignment",
                                "operator": "=",
                                "rightHandSide": {
                                  "arguments": [
                                    {
                                      "id": 6931,
                                      "name": "newCtx",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 6831,
                                      "src": "4909:6:31",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_bytes_memory_ptr",
                                        "typeString": "bytes memory"
                                      }
                                    }
                                  ],
                                  "expression": {
                                    "argumentTypes": [
                                      {
                                        "typeIdentifier": "t_bytes_memory_ptr",
                                        "typeString": "bytes memory"
                                      }
                                    ],
                                    "expression": {
                                      "arguments": [
                                        {
                                          "expression": {
                                            "id": 6927,
                                            "name": "msg",
                                            "nodeType": "Identifier",
                                            "overloadedDeclarations": [],
                                            "referencedDeclaration": -15,
                                            "src": "4887:3:31",
                                            "typeDescriptions": {
                                              "typeIdentifier": "t_magic_message",
                                              "typeString": "msg"
                                            }
                                          },
                                          "id": 6928,
                                          "isConstant": false,
                                          "isLValue": false,
                                          "isPure": false,
                                          "lValueRequested": false,
                                          "memberLocation": "4891:6:31",
                                          "memberName": "sender",
                                          "nodeType": "MemberAccess",
                                          "src": "4887:10:31",
                                          "typeDescriptions": {
                                            "typeIdentifier": "t_address",
                                            "typeString": "address"
                                          }
                                        }
                                      ],
                                      "expression": {
                                        "argumentTypes": [
                                          {
                                            "typeIdentifier": "t_address",
                                            "typeString": "address"
                                          }
                                        ],
                                        "id": 6926,
                                        "name": "ISuperfluid",
                                        "nodeType": "Identifier",
                                        "overloadedDeclarations": [],
                                        "referencedDeclaration": 25647,
                                        "src": "4875:11:31",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_type$_t_contract$_ISuperfluid_$25647_$",
                                          "typeString": "type(contract ISuperfluid)"
                                        }
                                      },
                                      "id": 6929,
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": false,
                                      "kind": "typeConversion",
                                      "lValueRequested": false,
                                      "nameLocations": [],
                                      "names": [],
                                      "nodeType": "FunctionCall",
                                      "src": "4875:23:31",
                                      "tryCall": false,
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_contract$_ISuperfluid_$25647",
                                        "typeString": "contract ISuperfluid"
                                      }
                                    },
                                    "id": 6930,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": false,
                                    "lValueRequested": false,
                                    "memberLocation": "4899:9:31",
                                    "memberName": "decodeCtx",
                                    "nodeType": "MemberAccess",
                                    "referencedDeclaration": 25616,
                                    "src": "4875:33:31",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_function_external_pure$_t_bytes_memory_ptr_$returns$_t_struct$_Context_$25580_memory_ptr_$",
                                      "typeString": "function (bytes memory) pure external returns (struct ISuperfluid.Context memory)"
                                    }
                                  },
                                  "id": 6932,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": false,
                                  "kind": "functionCall",
                                  "lValueRequested": false,
                                  "nameLocations": [],
                                  "names": [],
                                  "nodeType": "FunctionCall",
                                  "src": "4875:41:31",
                                  "tryCall": false,
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_struct$_Context_$25580_memory_ptr",
                                    "typeString": "struct ISuperfluid.Context memory"
                                  }
                                },
                                "src": "4862:54:31",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_struct$_Context_$25580_memory_ptr",
                                  "typeString": "struct ISuperfluid.Context memory"
                                }
                              },
                              "id": 6934,
                              "nodeType": "ExpressionStatement",
                              "src": "4862:54:31"
                            },
                            {
                              "expression": {
                                "id": 6944,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": false,
                                "lValueRequested": false,
                                "leftHandSide": {
                                  "expression": {
                                    "id": 6935,
                                    "name": "appContext",
                                    "nodeType": "Identifier",
                                    "overloadedDeclarations": [],
                                    "referencedDeclaration": 6829,
                                    "src": "5020:10:31",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_struct$_Context_$25580_memory_ptr",
                                      "typeString": "struct ISuperfluid.Context memory"
                                    }
                                  },
                                  "id": 6937,
                                  "isConstant": false,
                                  "isLValue": true,
                                  "isPure": false,
                                  "lValueRequested": true,
                                  "memberLocation": "5031:13:31",
                                  "memberName": "appCreditUsed",
                                  "nodeType": "MemberAccess",
                                  "referencedDeclaration": 25574,
                                  "src": "5020:24:31",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_int256",
                                    "typeString": "int256"
                                  }
                                },
                                "nodeType": "Assignment",
                                "operator": "=",
                                "rightHandSide": {
                                  "arguments": [
                                    {
                                      "expression": {
                                        "id": 6939,
                                        "name": "inputs",
                                        "nodeType": "Identifier",
                                        "overloadedDeclarations": [],
                                        "referencedDeclaration": 6821,
                                        "src": "5092:6:31",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                                          "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                        }
                                      },
                                      "id": 6940,
                                      "isConstant": false,
                                      "isLValue": true,
                                      "isPure": false,
                                      "lValueRequested": false,
                                      "memberLocation": "5099:16:31",
                                      "memberName": "appCreditGranted",
                                      "nodeType": "MemberAccess",
                                      "referencedDeclaration": 6666,
                                      "src": "5092:23:31",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_uint256",
                                        "typeString": "uint256"
                                      }
                                    },
                                    {
                                      "expression": {
                                        "id": 6941,
                                        "name": "appContext",
                                        "nodeType": "Identifier",
                                        "overloadedDeclarations": [],
                                        "referencedDeclaration": 6829,
                                        "src": "5137:10:31",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_struct$_Context_$25580_memory_ptr",
                                          "typeString": "struct ISuperfluid.Context memory"
                                        }
                                      },
                                      "id": 6942,
                                      "isConstant": false,
                                      "isLValue": true,
                                      "isPure": false,
                                      "lValueRequested": false,
                                      "memberLocation": "5148:13:31",
                                      "memberName": "appCreditUsed",
                                      "nodeType": "MemberAccess",
                                      "referencedDeclaration": 25574,
                                      "src": "5137:24:31",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_int256",
                                        "typeString": "int256"
                                      }
                                    }
                                  ],
                                  "expression": {
                                    "argumentTypes": [
                                      {
                                        "typeIdentifier": "t_uint256",
                                        "typeString": "uint256"
                                      },
                                      {
                                        "typeIdentifier": "t_int256",
                                        "typeString": "int256"
                                      }
                                    ],
                                    "id": 6938,
                                    "name": "_adjustNewAppCreditUsed",
                                    "nodeType": "Identifier",
                                    "overloadedDeclarations": [],
                                    "referencedDeclaration": 6980,
                                    "src": "5047:23:31",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_int256_$returns$_t_int256_$",
                                      "typeString": "function (uint256,int256) pure returns (int256)"
                                    }
                                  },
                                  "id": 6943,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": false,
                                  "kind": "functionCall",
                                  "lValueRequested": false,
                                  "nameLocations": [],
                                  "names": [],
                                  "nodeType": "FunctionCall",
                                  "src": "5047:132:31",
                                  "tryCall": false,
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_int256",
                                    "typeString": "int256"
                                  }
                                },
                                "src": "5020:159:31",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_int256",
                                  "typeString": "int256"
                                }
                              },
                              "id": 6945,
                              "nodeType": "ExpressionStatement",
                              "src": "5020:159:31"
                            }
                          ]
                        }
                      },
                      {
                        "expression": {
                          "id": 6954,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "leftHandSide": {
                            "id": 6948,
                            "name": "newCtx",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 6831,
                            "src": "5319:6:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_bytes_memory_ptr",
                              "typeString": "bytes memory"
                            }
                          },
                          "nodeType": "Assignment",
                          "operator": "=",
                          "rightHandSide": {
                            "arguments": [
                              {
                                "id": 6950,
                                "name": "ctx",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 6825,
                                "src": "5346:3:31",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_bytes_memory_ptr",
                                  "typeString": "bytes memory"
                                }
                              },
                              {
                                "expression": {
                                  "id": 6951,
                                  "name": "appContext",
                                  "nodeType": "Identifier",
                                  "overloadedDeclarations": [],
                                  "referencedDeclaration": 6829,
                                  "src": "5351:10:31",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_struct$_Context_$25580_memory_ptr",
                                    "typeString": "struct ISuperfluid.Context memory"
                                  }
                                },
                                "id": 6952,
                                "isConstant": false,
                                "isLValue": true,
                                "isPure": false,
                                "lValueRequested": false,
                                "memberLocation": "5362:13:31",
                                "memberName": "appCreditUsed",
                                "nodeType": "MemberAccess",
                                "referencedDeclaration": 25574,
                                "src": "5351:24:31",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_int256",
                                  "typeString": "int256"
                                }
                              }
                            ],
                            "expression": {
                              "argumentTypes": [
                                {
                                  "typeIdentifier": "t_bytes_memory_ptr",
                                  "typeString": "bytes memory"
                                },
                                {
                                  "typeIdentifier": "t_int256",
                                  "typeString": "int256"
                                }
                              ],
                              "id": 6949,
                              "name": "_popCallbackStack",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 7093,
                              "src": "5328:17:31",
                              "typeDescriptions": {
                                "typeIdentifier": "t_function_internal_nonpayable$_t_bytes_memory_ptr_$_t_int256_$returns$_t_bytes_memory_ptr_$",
                                "typeString": "function (bytes memory,int256) returns (bytes memory)"
                              }
                            },
                            "id": 6953,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": false,
                            "kind": "functionCall",
                            "lValueRequested": false,
                            "nameLocations": [],
                            "names": [],
                            "nodeType": "FunctionCall",
                            "src": "5328:48:31",
                            "tryCall": false,
                            "typeDescriptions": {
                              "typeIdentifier": "t_bytes_memory_ptr",
                              "typeString": "bytes memory"
                            }
                          },
                          "src": "5319:57:31",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bytes_memory_ptr",
                            "typeString": "bytes memory"
                          }
                        },
                        "id": 6955,
                        "nodeType": "ExpressionStatement",
                        "src": "5319:57:31"
                      }
                    ]
                  }
                }
              ]
            },
            "id": 6959,
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "callAppAfterCallback",
            "nameLocation": "3597:20:31",
            "nodeType": "FunctionDefinition",
            "parameters": {
              "id": 6826,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 6821,
                  "mutability": "mutable",
                  "name": "inputs",
                  "nameLocation": "3649:6:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 6959,
                  "src": "3627:28:31",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                    "typeString": "struct AgreementLibrary.CallbackInputs"
                  },
                  "typeName": {
                    "id": 6820,
                    "nodeType": "UserDefinedTypeName",
                    "pathNode": {
                      "id": 6819,
                      "name": "CallbackInputs",
                      "nameLocations": [
                        "3627:14:31"
                      ],
                      "nodeType": "IdentifierPath",
                      "referencedDeclaration": 6671,
                      "src": "3627:14:31"
                    },
                    "referencedDeclaration": 6671,
                    "src": "3627:14:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_struct$_CallbackInputs_$6671_storage_ptr",
                      "typeString": "struct AgreementLibrary.CallbackInputs"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 6823,
                  "mutability": "mutable",
                  "name": "cbdata",
                  "nameLocation": "3678:6:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 6959,
                  "src": "3665:19:31",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes_memory_ptr",
                    "typeString": "bytes"
                  },
                  "typeName": {
                    "id": 6822,
                    "name": "bytes",
                    "nodeType": "ElementaryTypeName",
                    "src": "3665:5:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_storage_ptr",
                      "typeString": "bytes"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 6825,
                  "mutability": "mutable",
                  "name": "ctx",
                  "nameLocation": "3719:3:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 6959,
                  "src": "3694:28:31",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes_memory_ptr",
                    "typeString": "bytes"
                  },
                  "typeName": {
                    "id": 6824,
                    "name": "bytes",
                    "nodeType": "ElementaryTypeName",
                    "src": "3694:5:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_storage_ptr",
                      "typeString": "bytes"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "3617:111:31"
            },
            "returnParameters": {
              "id": 6832,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 6829,
                  "mutability": "mutable",
                  "name": "appContext",
                  "nameLocation": "3790:10:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 6959,
                  "src": "3763:37:31",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_struct$_Context_$25580_memory_ptr",
                    "typeString": "struct ISuperfluid.Context"
                  },
                  "typeName": {
                    "id": 6828,
                    "nodeType": "UserDefinedTypeName",
                    "pathNode": {
                      "id": 6827,
                      "name": "ISuperfluid.Context",
                      "nameLocations": [
                        "3763:11:31",
                        "3775:7:31"
                      ],
                      "nodeType": "IdentifierPath",
                      "referencedDeclaration": 25580,
                      "src": "3763:19:31"
                    },
                    "referencedDeclaration": 25580,
                    "src": "3763:19:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_struct$_Context_$25580_storage_ptr",
                      "typeString": "struct ISuperfluid.Context"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 6831,
                  "mutability": "mutable",
                  "name": "newCtx",
                  "nameLocation": "3815:6:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 6959,
                  "src": "3802:19:31",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes_memory_ptr",
                    "typeString": "bytes"
                  },
                  "typeName": {
                    "id": 6830,
                    "name": "bytes",
                    "nodeType": "ElementaryTypeName",
                    "src": "3802:5:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_storage_ptr",
                      "typeString": "bytes"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "3762:60:31"
            },
            "scope": 7145,
            "src": "3588:1805:31",
            "stateMutability": "nonpayable",
            "virtual": false,
            "visibility": "internal"
          },
          {
            "body": {
              "id": 6979,
              "nodeType": "Block",
              "src": "5838:600:31",
              "statements": [
                {
                  "expression": {
                    "arguments": [
                      {
                        "hexValue": "30",
                        "id": 6970,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": true,
                        "kind": "number",
                        "lValueRequested": false,
                        "nodeType": "Literal",
                        "src": "6079:1:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_rational_0_by_1",
                          "typeString": "int_const 0"
                        },
                        "value": "0"
                      },
                      {
                        "arguments": [
                          {
                            "arguments": [],
                            "expression": {
                              "argumentTypes": [],
                              "expression": {
                                "id": 6972,
                                "name": "appCreditGranted",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 6962,
                                "src": "6339:16:31",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                }
                              },
                              "id": 6973,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "lValueRequested": false,
                              "memberLocation": "6356:8:31",
                              "memberName": "toInt256",
                              "nodeType": "MemberAccess",
                              "referencedDeclaration": 5506,
                              "src": "6339:25:31",
                              "typeDescriptions": {
                                "typeIdentifier": "t_function_internal_pure$_t_uint256_$returns$_t_int256_$attached_to$_t_uint256_$",
                                "typeString": "function (uint256) pure returns (int256)"
                              }
                            },
                            "id": 6974,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": false,
                            "kind": "functionCall",
                            "lValueRequested": false,
                            "nameLocations": [],
                            "names": [],
                            "nodeType": "FunctionCall",
                            "src": "6339:27:31",
                            "tryCall": false,
                            "typeDescriptions": {
                              "typeIdentifier": "t_int256",
                              "typeString": "int256"
                            }
                          },
                          {
                            "id": 6975,
                            "name": "appCallbackDepositDelta",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 6964,
                            "src": "6384:23:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_int256",
                              "typeString": "int256"
                            }
                          }
                        ],
                        "expression": {
                          "argumentTypes": [
                            {
                              "typeIdentifier": "t_int256",
                              "typeString": "int256"
                            },
                            {
                              "typeIdentifier": "t_int256",
                              "typeString": "int256"
                            }
                          ],
                          "id": 6971,
                          "name": "min",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 7144,
                          "src": "6318:3:31",
                          "typeDescriptions": {
                            "typeIdentifier": "t_function_internal_pure$_t_int256_$_t_int256_$returns$_t_int256_$",
                            "typeString": "function (int256,int256) pure returns (int256)"
                          }
                        },
                        "id": 6976,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "kind": "functionCall",
                        "lValueRequested": false,
                        "nameLocations": [],
                        "names": [],
                        "nodeType": "FunctionCall",
                        "src": "6318:103:31",
                        "tryCall": false,
                        "typeDescriptions": {
                          "typeIdentifier": "t_int256",
                          "typeString": "int256"
                        }
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_rational_0_by_1",
                          "typeString": "int_const 0"
                        },
                        {
                          "typeIdentifier": "t_int256",
                          "typeString": "int256"
                        }
                      ],
                      "id": 6969,
                      "name": "max",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [
                        7110,
                        7127
                      ],
                      "referencedDeclaration": 7110,
                      "src": "6062:3:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_internal_pure$_t_int256_$_t_int256_$returns$_t_int256_$",
                        "typeString": "function (int256,int256) pure returns (int256)"
                      }
                    },
                    "id": 6977,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "6062:369:31",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_int256",
                      "typeString": "int256"
                    }
                  },
                  "functionReturnParameters": 6968,
                  "id": 6978,
                  "nodeType": "Return",
                  "src": "6055:376:31"
                }
              ]
            },
            "documentation": {
              "id": 6960,
              "nodeType": "StructuredDocumentation",
              "src": "5399:290:31",
              "text": " @dev Determines how much app credit the app will use.\n @param appCreditGranted set prior to callback based on input flow\n @param appCallbackDepositDelta set in callback - sum of deposit deltas of callback agreements and\n current flow owed deposit amount"
            },
            "id": 6980,
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "_adjustNewAppCreditUsed",
            "nameLocation": "5703:23:31",
            "nodeType": "FunctionDefinition",
            "parameters": {
              "id": 6965,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 6962,
                  "mutability": "mutable",
                  "name": "appCreditGranted",
                  "nameLocation": "5744:16:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 6980,
                  "src": "5736:24:31",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  },
                  "typeName": {
                    "id": 6961,
                    "name": "uint256",
                    "nodeType": "ElementaryTypeName",
                    "src": "5736:7:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 6964,
                  "mutability": "mutable",
                  "name": "appCallbackDepositDelta",
                  "nameLocation": "5777:23:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 6980,
                  "src": "5770:30:31",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_int256",
                    "typeString": "int256"
                  },
                  "typeName": {
                    "id": 6963,
                    "name": "int256",
                    "nodeType": "ElementaryTypeName",
                    "src": "5770:6:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_int256",
                      "typeString": "int256"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "5726:80:31"
            },
            "returnParameters": {
              "id": 6968,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 6967,
                  "mutability": "mutable",
                  "name": "",
                  "nameLocation": "-1:-1:-1",
                  "nodeType": "VariableDeclaration",
                  "scope": 6980,
                  "src": "5830:6:31",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_int256",
                    "typeString": "int256"
                  },
                  "typeName": {
                    "id": 6966,
                    "name": "int256",
                    "nodeType": "ElementaryTypeName",
                    "src": "5830:6:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_int256",
                      "typeString": "int256"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "5829:8:31"
            },
            "scope": 7145,
            "src": "5694:744:31",
            "stateMutability": "pure",
            "virtual": false,
            "visibility": "internal"
          },
          {
            "body": {
              "id": 7042,
              "nodeType": "Block",
              "src": "6550:892:31",
              "statements": [
                {
                  "condition": {
                    "commonType": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    },
                    "id": 6990,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftExpression": {
                      "id": 6987,
                      "name": "noopBit",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 6982,
                      "src": "6564:7:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      }
                    },
                    "nodeType": "BinaryOperation",
                    "operator": "==",
                    "rightExpression": {
                      "expression": {
                        "id": 6988,
                        "name": "SuperAppDefinitions",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 23898,
                        "src": "6575:19:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_type$_t_contract$_SuperAppDefinitions_$23898_$",
                          "typeString": "type(library SuperAppDefinitions)"
                        }
                      },
                      "id": 6989,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": true,
                      "lValueRequested": false,
                      "memberLocation": "6595:29:31",
                      "memberName": "BEFORE_AGREEMENT_CREATED_NOOP",
                      "nodeType": "MemberAccess",
                      "referencedDeclaration": 23800,
                      "src": "6575:49:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      }
                    },
                    "src": "6564:60:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bool",
                      "typeString": "bool"
                    }
                  },
                  "falseBody": {
                    "condition": {
                      "commonType": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      },
                      "id": 6999,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "lValueRequested": false,
                      "leftExpression": {
                        "id": 6996,
                        "name": "noopBit",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 6982,
                        "src": "6709:7:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      "nodeType": "BinaryOperation",
                      "operator": "==",
                      "rightExpression": {
                        "expression": {
                          "id": 6997,
                          "name": "SuperAppDefinitions",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 23898,
                          "src": "6720:19:31",
                          "typeDescriptions": {
                            "typeIdentifier": "t_type$_t_contract$_SuperAppDefinitions_$23898_$",
                            "typeString": "type(library SuperAppDefinitions)"
                          }
                        },
                        "id": 6998,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": true,
                        "lValueRequested": false,
                        "memberLocation": "6740:29:31",
                        "memberName": "BEFORE_AGREEMENT_UPDATED_NOOP",
                        "nodeType": "MemberAccess",
                        "referencedDeclaration": 23816,
                        "src": "6720:49:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      "src": "6709:60:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bool",
                        "typeString": "bool"
                      }
                    },
                    "falseBody": {
                      "condition": {
                        "commonType": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        },
                        "id": 7008,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "lValueRequested": false,
                        "leftExpression": {
                          "id": 7005,
                          "name": "noopBit",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 6982,
                          "src": "6854:7:31",
                          "typeDescriptions": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          }
                        },
                        "nodeType": "BinaryOperation",
                        "operator": "==",
                        "rightExpression": {
                          "expression": {
                            "id": 7006,
                            "name": "SuperAppDefinitions",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 23898,
                            "src": "6865:19:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_type$_t_contract$_SuperAppDefinitions_$23898_$",
                              "typeString": "type(library SuperAppDefinitions)"
                            }
                          },
                          "id": 7007,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": true,
                          "lValueRequested": false,
                          "memberLocation": "6885:32:31",
                          "memberName": "BEFORE_AGREEMENT_TERMINATED_NOOP",
                          "nodeType": "MemberAccess",
                          "referencedDeclaration": 23832,
                          "src": "6865:52:31",
                          "typeDescriptions": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          }
                        },
                        "src": "6854:63:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      },
                      "falseBody": {
                        "condition": {
                          "commonType": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          },
                          "id": 7017,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "leftExpression": {
                            "id": 7014,
                            "name": "noopBit",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 6982,
                            "src": "7005:7:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "nodeType": "BinaryOperation",
                          "operator": "==",
                          "rightExpression": {
                            "expression": {
                              "id": 7015,
                              "name": "SuperAppDefinitions",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 23898,
                              "src": "7016:19:31",
                              "typeDescriptions": {
                                "typeIdentifier": "t_type$_t_contract$_SuperAppDefinitions_$23898_$",
                                "typeString": "type(library SuperAppDefinitions)"
                              }
                            },
                            "id": 7016,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": true,
                            "lValueRequested": false,
                            "memberLocation": "7036:28:31",
                            "memberName": "AFTER_AGREEMENT_CREATED_NOOP",
                            "nodeType": "MemberAccess",
                            "referencedDeclaration": 23808,
                            "src": "7016:48:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "src": "7005:59:31",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bool",
                            "typeString": "bool"
                          }
                        },
                        "falseBody": {
                          "condition": {
                            "commonType": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            },
                            "id": 7026,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": false,
                            "lValueRequested": false,
                            "leftExpression": {
                              "id": 7023,
                              "name": "noopBit",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 6982,
                              "src": "7148:7:31",
                              "typeDescriptions": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            },
                            "nodeType": "BinaryOperation",
                            "operator": "==",
                            "rightExpression": {
                              "expression": {
                                "id": 7024,
                                "name": "SuperAppDefinitions",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 23898,
                                "src": "7159:19:31",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_type$_t_contract$_SuperAppDefinitions_$23898_$",
                                  "typeString": "type(library SuperAppDefinitions)"
                                }
                              },
                              "id": 7025,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": true,
                              "lValueRequested": false,
                              "memberLocation": "7179:28:31",
                              "memberName": "AFTER_AGREEMENT_UPDATED_NOOP",
                              "nodeType": "MemberAccess",
                              "referencedDeclaration": 23824,
                              "src": "7159:48:31",
                              "typeDescriptions": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            },
                            "src": "7148:59:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_bool",
                              "typeString": "bool"
                            }
                          },
                          "falseBody": {
                            "id": 7036,
                            "nodeType": "Block",
                            "src": "7361:75:31",
                            "statements": [
                              {
                                "expression": {
                                  "expression": {
                                    "expression": {
                                      "id": 7032,
                                      "name": "ISuperApp",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 24506,
                                      "src": "7382:9:31",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_type$_t_contract$_ISuperApp_$24506_$",
                                        "typeString": "type(contract ISuperApp)"
                                      }
                                    },
                                    "id": 7033,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": true,
                                    "lValueRequested": false,
                                    "memberLocation": "7392:24:31",
                                    "memberName": "afterAgreementTerminated",
                                    "nodeType": "MemberAccess",
                                    "referencedDeclaration": 24505,
                                    "src": "7382:34:31",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_function_declaration_nonpayable$_t_contract$_ISuperToken_$24974_$_t_address_$_t_bytes32_$_t_bytes_calldata_ptr_$_t_bytes_calldata_ptr_$_t_bytes_calldata_ptr_$returns$_t_bytes_memory_ptr_$",
                                      "typeString": "function ISuperApp.afterAgreementTerminated(contract ISuperToken,address,bytes32,bytes calldata,bytes calldata,bytes calldata) returns (bytes memory)"
                                    }
                                  },
                                  "id": 7034,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": true,
                                  "lValueRequested": false,
                                  "memberLocation": "7417:8:31",
                                  "memberName": "selector",
                                  "nodeType": "MemberAccess",
                                  "src": "7382:43:31",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_bytes4",
                                    "typeString": "bytes4"
                                  }
                                },
                                "functionReturnParameters": 6986,
                                "id": 7035,
                                "nodeType": "Return",
                                "src": "7375:50:31"
                              }
                            ]
                          },
                          "id": 7037,
                          "nodeType": "IfStatement",
                          "src": "7144:292:31",
                          "trueBody": {
                            "id": 7031,
                            "nodeType": "Block",
                            "src": "7209:72:31",
                            "statements": [
                              {
                                "expression": {
                                  "expression": {
                                    "expression": {
                                      "id": 7027,
                                      "name": "ISuperApp",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 24506,
                                      "src": "7230:9:31",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_type$_t_contract$_ISuperApp_$24506_$",
                                        "typeString": "type(contract ISuperApp)"
                                      }
                                    },
                                    "id": 7028,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": true,
                                    "lValueRequested": false,
                                    "memberLocation": "7240:21:31",
                                    "memberName": "afterAgreementUpdated",
                                    "nodeType": "MemberAccess",
                                    "referencedDeclaration": 24469,
                                    "src": "7230:31:31",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_function_declaration_nonpayable$_t_contract$_ISuperToken_$24974_$_t_address_$_t_bytes32_$_t_bytes_calldata_ptr_$_t_bytes_calldata_ptr_$_t_bytes_calldata_ptr_$returns$_t_bytes_memory_ptr_$",
                                      "typeString": "function ISuperApp.afterAgreementUpdated(contract ISuperToken,address,bytes32,bytes calldata,bytes calldata,bytes calldata) returns (bytes memory)"
                                    }
                                  },
                                  "id": 7029,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": true,
                                  "lValueRequested": false,
                                  "memberLocation": "7262:8:31",
                                  "memberName": "selector",
                                  "nodeType": "MemberAccess",
                                  "src": "7230:40:31",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_bytes4",
                                    "typeString": "bytes4"
                                  }
                                },
                                "functionReturnParameters": 6986,
                                "id": 7030,
                                "nodeType": "Return",
                                "src": "7223:47:31"
                              }
                            ]
                          }
                        },
                        "id": 7038,
                        "nodeType": "IfStatement",
                        "src": "7001:435:31",
                        "trueBody": {
                          "id": 7022,
                          "nodeType": "Block",
                          "src": "7066:72:31",
                          "statements": [
                            {
                              "expression": {
                                "expression": {
                                  "expression": {
                                    "id": 7018,
                                    "name": "ISuperApp",
                                    "nodeType": "Identifier",
                                    "overloadedDeclarations": [],
                                    "referencedDeclaration": 24506,
                                    "src": "7087:9:31",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_type$_t_contract$_ISuperApp_$24506_$",
                                      "typeString": "type(contract ISuperApp)"
                                    }
                                  },
                                  "id": 7019,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": true,
                                  "lValueRequested": false,
                                  "memberLocation": "7097:21:31",
                                  "memberName": "afterAgreementCreated",
                                  "nodeType": "MemberAccess",
                                  "referencedDeclaration": 24433,
                                  "src": "7087:31:31",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_function_declaration_nonpayable$_t_contract$_ISuperToken_$24974_$_t_address_$_t_bytes32_$_t_bytes_calldata_ptr_$_t_bytes_calldata_ptr_$_t_bytes_calldata_ptr_$returns$_t_bytes_memory_ptr_$",
                                    "typeString": "function ISuperApp.afterAgreementCreated(contract ISuperToken,address,bytes32,bytes calldata,bytes calldata,bytes calldata) returns (bytes memory)"
                                  }
                                },
                                "id": 7020,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": true,
                                "lValueRequested": false,
                                "memberLocation": "7119:8:31",
                                "memberName": "selector",
                                "nodeType": "MemberAccess",
                                "src": "7087:40:31",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_bytes4",
                                  "typeString": "bytes4"
                                }
                              },
                              "functionReturnParameters": 6986,
                              "id": 7021,
                              "nodeType": "Return",
                              "src": "7080:47:31"
                            }
                          ]
                        }
                      },
                      "id": 7039,
                      "nodeType": "IfStatement",
                      "src": "6850:586:31",
                      "trueBody": {
                        "id": 7013,
                        "nodeType": "Block",
                        "src": "6919:76:31",
                        "statements": [
                          {
                            "expression": {
                              "expression": {
                                "expression": {
                                  "id": 7009,
                                  "name": "ISuperApp",
                                  "nodeType": "Identifier",
                                  "overloadedDeclarations": [],
                                  "referencedDeclaration": 24506,
                                  "src": "6940:9:31",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_type$_t_contract$_ISuperApp_$24506_$",
                                    "typeString": "type(contract ISuperApp)"
                                  }
                                },
                                "id": 7010,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": true,
                                "lValueRequested": false,
                                "memberLocation": "6950:25:31",
                                "memberName": "beforeAgreementTerminated",
                                "nodeType": "MemberAccess",
                                "referencedDeclaration": 24486,
                                "src": "6940:35:31",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_function_declaration_view$_t_contract$_ISuperToken_$24974_$_t_address_$_t_bytes32_$_t_bytes_calldata_ptr_$_t_bytes_calldata_ptr_$returns$_t_bytes_memory_ptr_$",
                                  "typeString": "function ISuperApp.beforeAgreementTerminated(contract ISuperToken,address,bytes32,bytes calldata,bytes calldata) view returns (bytes memory)"
                                }
                              },
                              "id": 7011,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": true,
                              "lValueRequested": false,
                              "memberLocation": "6976:8:31",
                              "memberName": "selector",
                              "nodeType": "MemberAccess",
                              "src": "6940:44:31",
                              "typeDescriptions": {
                                "typeIdentifier": "t_bytes4",
                                "typeString": "bytes4"
                              }
                            },
                            "functionReturnParameters": 6986,
                            "id": 7012,
                            "nodeType": "Return",
                            "src": "6933:51:31"
                          }
                        ]
                      }
                    },
                    "id": 7040,
                    "nodeType": "IfStatement",
                    "src": "6705:731:31",
                    "trueBody": {
                      "id": 7004,
                      "nodeType": "Block",
                      "src": "6771:73:31",
                      "statements": [
                        {
                          "expression": {
                            "expression": {
                              "expression": {
                                "id": 7000,
                                "name": "ISuperApp",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 24506,
                                "src": "6792:9:31",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_type$_t_contract$_ISuperApp_$24506_$",
                                  "typeString": "type(contract ISuperApp)"
                                }
                              },
                              "id": 7001,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": true,
                              "lValueRequested": false,
                              "memberLocation": "6802:22:31",
                              "memberName": "beforeAgreementUpdated",
                              "nodeType": "MemberAccess",
                              "referencedDeclaration": 24450,
                              "src": "6792:32:31",
                              "typeDescriptions": {
                                "typeIdentifier": "t_function_declaration_view$_t_contract$_ISuperToken_$24974_$_t_address_$_t_bytes32_$_t_bytes_calldata_ptr_$_t_bytes_calldata_ptr_$returns$_t_bytes_memory_ptr_$",
                                "typeString": "function ISuperApp.beforeAgreementUpdated(contract ISuperToken,address,bytes32,bytes calldata,bytes calldata) view returns (bytes memory)"
                              }
                            },
                            "id": 7002,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": true,
                            "lValueRequested": false,
                            "memberLocation": "6825:8:31",
                            "memberName": "selector",
                            "nodeType": "MemberAccess",
                            "src": "6792:41:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_bytes4",
                              "typeString": "bytes4"
                            }
                          },
                          "functionReturnParameters": 6986,
                          "id": 7003,
                          "nodeType": "Return",
                          "src": "6785:48:31"
                        }
                      ]
                    }
                  },
                  "id": 7041,
                  "nodeType": "IfStatement",
                  "src": "6560:876:31",
                  "trueBody": {
                    "id": 6995,
                    "nodeType": "Block",
                    "src": "6626:73:31",
                    "statements": [
                      {
                        "expression": {
                          "expression": {
                            "expression": {
                              "id": 6991,
                              "name": "ISuperApp",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 24506,
                              "src": "6647:9:31",
                              "typeDescriptions": {
                                "typeIdentifier": "t_type$_t_contract$_ISuperApp_$24506_$",
                                "typeString": "type(contract ISuperApp)"
                              }
                            },
                            "id": 6992,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": true,
                            "lValueRequested": false,
                            "memberLocation": "6657:22:31",
                            "memberName": "beforeAgreementCreated",
                            "nodeType": "MemberAccess",
                            "referencedDeclaration": 24414,
                            "src": "6647:32:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_function_declaration_view$_t_contract$_ISuperToken_$24974_$_t_address_$_t_bytes32_$_t_bytes_calldata_ptr_$_t_bytes_calldata_ptr_$returns$_t_bytes_memory_ptr_$",
                              "typeString": "function ISuperApp.beforeAgreementCreated(contract ISuperToken,address,bytes32,bytes calldata,bytes calldata) view returns (bytes memory)"
                            }
                          },
                          "id": 6993,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": true,
                          "lValueRequested": false,
                          "memberLocation": "6680:8:31",
                          "memberName": "selector",
                          "nodeType": "MemberAccess",
                          "src": "6647:41:31",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bytes4",
                            "typeString": "bytes4"
                          }
                        },
                        "functionReturnParameters": 6986,
                        "id": 6994,
                        "nodeType": "Return",
                        "src": "6640:48:31"
                      }
                    ]
                  }
                }
              ]
            },
            "id": 7043,
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "_selectorFromNoopBit",
            "nameLocation": "6453:20:31",
            "nodeType": "FunctionDefinition",
            "parameters": {
              "id": 6983,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 6982,
                  "mutability": "mutable",
                  "name": "noopBit",
                  "nameLocation": "6482:7:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 7043,
                  "src": "6474:15:31",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  },
                  "typeName": {
                    "id": 6981,
                    "name": "uint256",
                    "nodeType": "ElementaryTypeName",
                    "src": "6474:7:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "6473:17:31"
            },
            "returnParameters": {
              "id": 6986,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 6985,
                  "mutability": "mutable",
                  "name": "selector",
                  "nameLocation": "6536:8:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 7043,
                  "src": "6529:15:31",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes4",
                    "typeString": "bytes4"
                  },
                  "typeName": {
                    "id": 6984,
                    "name": "bytes4",
                    "nodeType": "ElementaryTypeName",
                    "src": "6529:6:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes4",
                      "typeString": "bytes4"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "6528:17:31"
            },
            "scope": 7145,
            "src": "6444:998:31",
            "stateMutability": "pure",
            "virtual": false,
            "visibility": "private"
          },
          {
            "body": {
              "id": 7073,
              "nodeType": "Block",
              "src": "7604:322:31",
              "statements": [
                {
                  "expression": {
                    "id": 7071,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftHandSide": {
                      "id": 7053,
                      "name": "appCtx",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 7051,
                      "src": "7717:6:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bytes_memory_ptr",
                        "typeString": "bytes memory"
                      }
                    },
                    "nodeType": "Assignment",
                    "operator": "=",
                    "rightHandSide": {
                      "arguments": [
                        {
                          "id": 7059,
                          "name": "ctx",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 7045,
                          "src": "7779:3:31",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bytes_memory_ptr",
                            "typeString": "bytes memory"
                          }
                        },
                        {
                          "arguments": [
                            {
                              "expression": {
                                "id": 7061,
                                "name": "inputs",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 7048,
                                "src": "7806:6:31",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                                  "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                }
                              },
                              "id": 7062,
                              "isConstant": false,
                              "isLValue": true,
                              "isPure": false,
                              "lValueRequested": false,
                              "memberLocation": "7813:7:31",
                              "memberName": "account",
                              "nodeType": "MemberAccess",
                              "referencedDeclaration": 6660,
                              "src": "7806:14:31",
                              "typeDescriptions": {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            }
                          ],
                          "expression": {
                            "argumentTypes": [
                              {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            ],
                            "id": 7060,
                            "name": "ISuperApp",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 24506,
                            "src": "7796:9:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_type$_t_contract$_ISuperApp_$24506_$",
                              "typeString": "type(contract ISuperApp)"
                            }
                          },
                          "id": 7063,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "kind": "typeConversion",
                          "lValueRequested": false,
                          "nameLocations": [],
                          "names": [],
                          "nodeType": "FunctionCall",
                          "src": "7796:25:31",
                          "tryCall": false,
                          "typeDescriptions": {
                            "typeIdentifier": "t_contract$_ISuperApp_$24506",
                            "typeString": "contract ISuperApp"
                          }
                        },
                        {
                          "expression": {
                            "id": 7064,
                            "name": "inputs",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 7048,
                            "src": "7835:6:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                              "typeString": "struct AgreementLibrary.CallbackInputs memory"
                            }
                          },
                          "id": 7065,
                          "isConstant": false,
                          "isLValue": true,
                          "isPure": false,
                          "lValueRequested": false,
                          "memberLocation": "7842:16:31",
                          "memberName": "appCreditGranted",
                          "nodeType": "MemberAccess",
                          "referencedDeclaration": 6666,
                          "src": "7835:23:31",
                          "typeDescriptions": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          }
                        },
                        {
                          "expression": {
                            "id": 7066,
                            "name": "inputs",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 7048,
                            "src": "7872:6:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                              "typeString": "struct AgreementLibrary.CallbackInputs memory"
                            }
                          },
                          "id": 7067,
                          "isConstant": false,
                          "isLValue": true,
                          "isPure": false,
                          "lValueRequested": false,
                          "memberLocation": "7879:13:31",
                          "memberName": "appCreditUsed",
                          "nodeType": "MemberAccess",
                          "referencedDeclaration": 6668,
                          "src": "7872:20:31",
                          "typeDescriptions": {
                            "typeIdentifier": "t_int256",
                            "typeString": "int256"
                          }
                        },
                        {
                          "expression": {
                            "id": 7068,
                            "name": "inputs",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 7048,
                            "src": "7906:6:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                              "typeString": "struct AgreementLibrary.CallbackInputs memory"
                            }
                          },
                          "id": 7069,
                          "isConstant": false,
                          "isLValue": true,
                          "isPure": false,
                          "lValueRequested": false,
                          "memberLocation": "7913:5:31",
                          "memberName": "token",
                          "nodeType": "MemberAccess",
                          "referencedDeclaration": 6658,
                          "src": "7906:12:31",
                          "typeDescriptions": {
                            "typeIdentifier": "t_contract$_ISuperfluidToken_$26072",
                            "typeString": "contract ISuperfluidToken"
                          }
                        }
                      ],
                      "expression": {
                        "argumentTypes": [
                          {
                            "typeIdentifier": "t_bytes_memory_ptr",
                            "typeString": "bytes memory"
                          },
                          {
                            "typeIdentifier": "t_contract$_ISuperApp_$24506",
                            "typeString": "contract ISuperApp"
                          },
                          {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          },
                          {
                            "typeIdentifier": "t_int256",
                            "typeString": "int256"
                          },
                          {
                            "typeIdentifier": "t_contract$_ISuperfluidToken_$26072",
                            "typeString": "contract ISuperfluidToken"
                          }
                        ],
                        "expression": {
                          "arguments": [
                            {
                              "expression": {
                                "id": 7055,
                                "name": "msg",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": -15,
                                "src": "7738:3:31",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_magic_message",
                                  "typeString": "msg"
                                }
                              },
                              "id": 7056,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "lValueRequested": false,
                              "memberLocation": "7742:6:31",
                              "memberName": "sender",
                              "nodeType": "MemberAccess",
                              "src": "7738:10:31",
                              "typeDescriptions": {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            }
                          ],
                          "expression": {
                            "argumentTypes": [
                              {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            ],
                            "id": 7054,
                            "name": "ISuperfluid",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 25647,
                            "src": "7726:11:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_type$_t_contract$_ISuperfluid_$25647_$",
                              "typeString": "type(contract ISuperfluid)"
                            }
                          },
                          "id": 7057,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "kind": "typeConversion",
                          "lValueRequested": false,
                          "nameLocations": [],
                          "names": [],
                          "nodeType": "FunctionCall",
                          "src": "7726:23:31",
                          "tryCall": false,
                          "typeDescriptions": {
                            "typeIdentifier": "t_contract$_ISuperfluid_$25647",
                            "typeString": "contract ISuperfluid"
                          }
                        },
                        "id": 7058,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "lValueRequested": false,
                        "memberLocation": "7750:15:31",
                        "memberName": "appCallbackPush",
                        "nodeType": "MemberAccess",
                        "referencedDeclaration": 25491,
                        "src": "7726:39:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_function_external_nonpayable$_t_bytes_memory_ptr_$_t_contract$_ISuperApp_$24506_$_t_uint256_$_t_int256_$_t_contract$_ISuperfluidToken_$26072_$returns$_t_bytes_memory_ptr_$",
                          "typeString": "function (bytes memory,contract ISuperApp,uint256,int256,contract ISuperfluidToken) external returns (bytes memory)"
                        }
                      },
                      "id": 7070,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "kind": "functionCall",
                      "lValueRequested": false,
                      "nameLocations": [],
                      "names": [],
                      "nodeType": "FunctionCall",
                      "src": "7726:193:31",
                      "tryCall": false,
                      "typeDescriptions": {
                        "typeIdentifier": "t_bytes_memory_ptr",
                        "typeString": "bytes memory"
                      }
                    },
                    "src": "7717:202:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_memory_ptr",
                      "typeString": "bytes memory"
                    }
                  },
                  "id": 7072,
                  "nodeType": "ExpressionStatement",
                  "src": "7717:202:31"
                }
              ]
            },
            "id": 7074,
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "_pushCallbackStack",
            "nameLocation": "7457:18:31",
            "nodeType": "FunctionDefinition",
            "parameters": {
              "id": 7049,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 7045,
                  "mutability": "mutable",
                  "name": "ctx",
                  "nameLocation": "7498:3:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 7074,
                  "src": "7485:16:31",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes_memory_ptr",
                    "typeString": "bytes"
                  },
                  "typeName": {
                    "id": 7044,
                    "name": "bytes",
                    "nodeType": "ElementaryTypeName",
                    "src": "7485:5:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_storage_ptr",
                      "typeString": "bytes"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 7048,
                  "mutability": "mutable",
                  "name": "inputs",
                  "nameLocation": "7533:6:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 7074,
                  "src": "7511:28:31",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_struct$_CallbackInputs_$6671_memory_ptr",
                    "typeString": "struct AgreementLibrary.CallbackInputs"
                  },
                  "typeName": {
                    "id": 7047,
                    "nodeType": "UserDefinedTypeName",
                    "pathNode": {
                      "id": 7046,
                      "name": "CallbackInputs",
                      "nameLocations": [
                        "7511:14:31"
                      ],
                      "nodeType": "IdentifierPath",
                      "referencedDeclaration": 6671,
                      "src": "7511:14:31"
                    },
                    "referencedDeclaration": 6671,
                    "src": "7511:14:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_struct$_CallbackInputs_$6671_storage_ptr",
                      "typeString": "struct AgreementLibrary.CallbackInputs"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "7475:70:31"
            },
            "returnParameters": {
              "id": 7052,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 7051,
                  "mutability": "mutable",
                  "name": "appCtx",
                  "nameLocation": "7592:6:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 7074,
                  "src": "7579:19:31",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes_memory_ptr",
                    "typeString": "bytes"
                  },
                  "typeName": {
                    "id": 7050,
                    "name": "bytes",
                    "nodeType": "ElementaryTypeName",
                    "src": "7579:5:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_storage_ptr",
                      "typeString": "bytes"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "7578:21:31"
            },
            "scope": 7145,
            "src": "7448:478:31",
            "stateMutability": "nonpayable",
            "virtual": false,
            "visibility": "private"
          },
          {
            "body": {
              "id": 7092,
              "nodeType": "Block",
              "src": "8084:126:31",
              "statements": [
                {
                  "expression": {
                    "arguments": [
                      {
                        "id": 7088,
                        "name": "ctx",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 7076,
                        "src": "8179:3:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bytes_memory_ptr",
                          "typeString": "bytes memory"
                        }
                      },
                      {
                        "id": 7089,
                        "name": "appCreditUsedDelta",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 7078,
                        "src": "8184:18:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_int256",
                          "typeString": "int256"
                        }
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_bytes_memory_ptr",
                          "typeString": "bytes memory"
                        },
                        {
                          "typeIdentifier": "t_int256",
                          "typeString": "int256"
                        }
                      ],
                      "expression": {
                        "arguments": [
                          {
                            "expression": {
                              "id": 7084,
                              "name": "msg",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": -15,
                              "src": "8152:3:31",
                              "typeDescriptions": {
                                "typeIdentifier": "t_magic_message",
                                "typeString": "msg"
                              }
                            },
                            "id": 7085,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": false,
                            "lValueRequested": false,
                            "memberLocation": "8156:6:31",
                            "memberName": "sender",
                            "nodeType": "MemberAccess",
                            "src": "8152:10:31",
                            "typeDescriptions": {
                              "typeIdentifier": "t_address",
                              "typeString": "address"
                            }
                          }
                        ],
                        "expression": {
                          "argumentTypes": [
                            {
                              "typeIdentifier": "t_address",
                              "typeString": "address"
                            }
                          ],
                          "id": 7083,
                          "name": "ISuperfluid",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 25647,
                          "src": "8140:11:31",
                          "typeDescriptions": {
                            "typeIdentifier": "t_type$_t_contract$_ISuperfluid_$25647_$",
                            "typeString": "type(contract ISuperfluid)"
                          }
                        },
                        "id": 7086,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "kind": "typeConversion",
                        "lValueRequested": false,
                        "nameLocations": [],
                        "names": [],
                        "nodeType": "FunctionCall",
                        "src": "8140:23:31",
                        "tryCall": false,
                        "typeDescriptions": {
                          "typeIdentifier": "t_contract$_ISuperfluid_$25647",
                          "typeString": "contract ISuperfluid"
                        }
                      },
                      "id": 7087,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "lValueRequested": false,
                      "memberLocation": "8164:14:31",
                      "memberName": "appCallbackPop",
                      "nodeType": "MemberAccess",
                      "referencedDeclaration": 25501,
                      "src": "8140:38:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_external_nonpayable$_t_bytes_memory_ptr_$_t_int256_$returns$_t_bytes_memory_ptr_$",
                        "typeString": "function (bytes memory,int256) external returns (bytes memory)"
                      }
                    },
                    "id": 7090,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "8140:63:31",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_memory_ptr",
                      "typeString": "bytes memory"
                    }
                  },
                  "functionReturnParameters": 7082,
                  "id": 7091,
                  "nodeType": "Return",
                  "src": "8133:70:31"
                }
              ]
            },
            "id": 7093,
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "_popCallbackStack",
            "nameLocation": "7941:17:31",
            "nodeType": "FunctionDefinition",
            "parameters": {
              "id": 7079,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 7076,
                  "mutability": "mutable",
                  "name": "ctx",
                  "nameLocation": "7981:3:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 7093,
                  "src": "7968:16:31",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes_memory_ptr",
                    "typeString": "bytes"
                  },
                  "typeName": {
                    "id": 7075,
                    "name": "bytes",
                    "nodeType": "ElementaryTypeName",
                    "src": "7968:5:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_storage_ptr",
                      "typeString": "bytes"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 7078,
                  "mutability": "mutable",
                  "name": "appCreditUsedDelta",
                  "nameLocation": "8001:18:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 7093,
                  "src": "7994:25:31",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_int256",
                    "typeString": "int256"
                  },
                  "typeName": {
                    "id": 7077,
                    "name": "int256",
                    "nodeType": "ElementaryTypeName",
                    "src": "7994:6:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_int256",
                      "typeString": "int256"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "7958:67:31"
            },
            "returnParameters": {
              "id": 7082,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 7081,
                  "mutability": "mutable",
                  "name": "newCtx",
                  "nameLocation": "8072:6:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 7093,
                  "src": "8059:19:31",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes_memory_ptr",
                    "typeString": "bytes"
                  },
                  "typeName": {
                    "id": 7080,
                    "name": "bytes",
                    "nodeType": "ElementaryTypeName",
                    "src": "8059:5:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_storage_ptr",
                      "typeString": "bytes"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "8058:21:31"
            },
            "scope": 7145,
            "src": "7932:278:31",
            "stateMutability": "nonpayable",
            "virtual": false,
            "visibility": "private"
          },
          {
            "body": {
              "id": 7109,
              "nodeType": "Block",
              "src": "8453:25:31",
              "statements": [
                {
                  "expression": {
                    "condition": {
                      "commonType": {
                        "typeIdentifier": "t_int256",
                        "typeString": "int256"
                      },
                      "id": 7104,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "lValueRequested": false,
                      "leftExpression": {
                        "id": 7102,
                        "name": "a",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 7095,
                        "src": "8462:1:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_int256",
                          "typeString": "int256"
                        }
                      },
                      "nodeType": "BinaryOperation",
                      "operator": ">",
                      "rightExpression": {
                        "id": 7103,
                        "name": "b",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 7097,
                        "src": "8466:1:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_int256",
                          "typeString": "int256"
                        }
                      },
                      "src": "8462:5:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bool",
                        "typeString": "bool"
                      }
                    },
                    "falseExpression": {
                      "id": 7106,
                      "name": "b",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 7097,
                      "src": "8474:1:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_int256",
                        "typeString": "int256"
                      }
                    },
                    "id": 7107,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "nodeType": "Conditional",
                    "src": "8462:13:31",
                    "trueExpression": {
                      "id": 7105,
                      "name": "a",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 7095,
                      "src": "8470:1:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_int256",
                        "typeString": "int256"
                      }
                    },
                    "typeDescriptions": {
                      "typeIdentifier": "t_int256",
                      "typeString": "int256"
                    }
                  },
                  "functionReturnParameters": 7101,
                  "id": 7108,
                  "nodeType": "Return",
                  "src": "8455:20:31"
                }
              ]
            },
            "id": 7110,
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "max",
            "nameLocation": "8398:3:31",
            "nodeType": "FunctionDefinition",
            "parameters": {
              "id": 7098,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 7095,
                  "mutability": "mutable",
                  "name": "a",
                  "nameLocation": "8409:1:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 7110,
                  "src": "8402:8:31",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_int256",
                    "typeString": "int256"
                  },
                  "typeName": {
                    "id": 7094,
                    "name": "int256",
                    "nodeType": "ElementaryTypeName",
                    "src": "8402:6:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_int256",
                      "typeString": "int256"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 7097,
                  "mutability": "mutable",
                  "name": "b",
                  "nameLocation": "8419:1:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 7110,
                  "src": "8412:8:31",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_int256",
                    "typeString": "int256"
                  },
                  "typeName": {
                    "id": 7096,
                    "name": "int256",
                    "nodeType": "ElementaryTypeName",
                    "src": "8412:6:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_int256",
                      "typeString": "int256"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "8401:20:31"
            },
            "returnParameters": {
              "id": 7101,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 7100,
                  "mutability": "mutable",
                  "name": "",
                  "nameLocation": "-1:-1:-1",
                  "nodeType": "VariableDeclaration",
                  "scope": 7110,
                  "src": "8445:6:31",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_int256",
                    "typeString": "int256"
                  },
                  "typeName": {
                    "id": 7099,
                    "name": "int256",
                    "nodeType": "ElementaryTypeName",
                    "src": "8445:6:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_int256",
                      "typeString": "int256"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "8444:8:31"
            },
            "scope": 7145,
            "src": "8389:89:31",
            "stateMutability": "pure",
            "virtual": false,
            "visibility": "internal"
          },
          {
            "body": {
              "id": 7126,
              "nodeType": "Block",
              "src": "8550:25:31",
              "statements": [
                {
                  "expression": {
                    "condition": {
                      "commonType": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      },
                      "id": 7121,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "lValueRequested": false,
                      "leftExpression": {
                        "id": 7119,
                        "name": "a",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 7112,
                        "src": "8559:1:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      "nodeType": "BinaryOperation",
                      "operator": ">",
                      "rightExpression": {
                        "id": 7120,
                        "name": "b",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 7114,
                        "src": "8563:1:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      "src": "8559:5:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bool",
                        "typeString": "bool"
                      }
                    },
                    "falseExpression": {
                      "id": 7123,
                      "name": "b",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 7114,
                      "src": "8571:1:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      }
                    },
                    "id": 7124,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "nodeType": "Conditional",
                    "src": "8559:13:31",
                    "trueExpression": {
                      "id": 7122,
                      "name": "a",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 7112,
                      "src": "8567:1:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      }
                    },
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "functionReturnParameters": 7118,
                  "id": 7125,
                  "nodeType": "Return",
                  "src": "8552:20:31"
                }
              ]
            },
            "id": 7127,
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "max",
            "nameLocation": "8492:3:31",
            "nodeType": "FunctionDefinition",
            "parameters": {
              "id": 7115,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 7112,
                  "mutability": "mutable",
                  "name": "a",
                  "nameLocation": "8504:1:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 7127,
                  "src": "8496:9:31",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  },
                  "typeName": {
                    "id": 7111,
                    "name": "uint256",
                    "nodeType": "ElementaryTypeName",
                    "src": "8496:7:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 7114,
                  "mutability": "mutable",
                  "name": "b",
                  "nameLocation": "8515:1:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 7127,
                  "src": "8507:9:31",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  },
                  "typeName": {
                    "id": 7113,
                    "name": "uint256",
                    "nodeType": "ElementaryTypeName",
                    "src": "8507:7:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "8495:22:31"
            },
            "returnParameters": {
              "id": 7118,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 7117,
                  "mutability": "mutable",
                  "name": "",
                  "nameLocation": "-1:-1:-1",
                  "nodeType": "VariableDeclaration",
                  "scope": 7127,
                  "src": "8541:7:31",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  },
                  "typeName": {
                    "id": 7116,
                    "name": "uint256",
                    "nodeType": "ElementaryTypeName",
                    "src": "8541:7:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "8540:9:31"
            },
            "scope": 7145,
            "src": "8483:92:31",
            "stateMutability": "pure",
            "virtual": false,
            "visibility": "internal"
          },
          {
            "body": {
              "id": 7143,
              "nodeType": "Block",
              "src": "8645:25:31",
              "statements": [
                {
                  "expression": {
                    "condition": {
                      "commonType": {
                        "typeIdentifier": "t_int256",
                        "typeString": "int256"
                      },
                      "id": 7138,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "lValueRequested": false,
                      "leftExpression": {
                        "id": 7136,
                        "name": "a",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 7129,
                        "src": "8654:1:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_int256",
                          "typeString": "int256"
                        }
                      },
                      "nodeType": "BinaryOperation",
                      "operator": ">",
                      "rightExpression": {
                        "id": 7137,
                        "name": "b",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 7131,
                        "src": "8658:1:31",
                        "typeDescriptions": {
                          "typeIdentifier": "t_int256",
                          "typeString": "int256"
                        }
                      },
                      "src": "8654:5:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bool",
                        "typeString": "bool"
                      }
                    },
                    "falseExpression": {
                      "id": 7140,
                      "name": "a",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 7129,
                      "src": "8666:1:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_int256",
                        "typeString": "int256"
                      }
                    },
                    "id": 7141,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "nodeType": "Conditional",
                    "src": "8654:13:31",
                    "trueExpression": {
                      "id": 7139,
                      "name": "b",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 7131,
                      "src": "8662:1:31",
                      "typeDescriptions": {
                        "typeIdentifier": "t_int256",
                        "typeString": "int256"
                      }
                    },
                    "typeDescriptions": {
                      "typeIdentifier": "t_int256",
                      "typeString": "int256"
                    }
                  },
                  "functionReturnParameters": 7135,
                  "id": 7142,
                  "nodeType": "Return",
                  "src": "8647:20:31"
                }
              ]
            },
            "id": 7144,
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "min",
            "nameLocation": "8590:3:31",
            "nodeType": "FunctionDefinition",
            "parameters": {
              "id": 7132,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 7129,
                  "mutability": "mutable",
                  "name": "a",
                  "nameLocation": "8601:1:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 7144,
                  "src": "8594:8:31",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_int256",
                    "typeString": "int256"
                  },
                  "typeName": {
                    "id": 7128,
                    "name": "int256",
                    "nodeType": "ElementaryTypeName",
                    "src": "8594:6:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_int256",
                      "typeString": "int256"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 7131,
                  "mutability": "mutable",
                  "name": "b",
                  "nameLocation": "8611:1:31",
                  "nodeType": "VariableDeclaration",
                  "scope": 7144,
                  "src": "8604:8:31",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_int256",
                    "typeString": "int256"
                  },
                  "typeName": {
                    "id": 7130,
                    "name": "int256",
                    "nodeType": "ElementaryTypeName",
                    "src": "8604:6:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_int256",
                      "typeString": "int256"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "8593:20:31"
            },
            "returnParameters": {
              "id": 7135,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 7134,
                  "mutability": "mutable",
                  "name": "",
                  "nameLocation": "-1:-1:-1",
                  "nodeType": "VariableDeclaration",
                  "scope": 7144,
                  "src": "8637:6:31",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_int256",
                    "typeString": "int256"
                  },
                  "typeName": {
                    "id": 7133,
                    "name": "int256",
                    "nodeType": "ElementaryTypeName",
                    "src": "8637:6:31",
                    "typeDescriptions": {
                      "typeIdentifier": "t_int256",
                      "typeString": "int256"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "8636:8:31"
            },
            "scope": 7145,
            "src": "8581:89:31",
            "stateMutability": "pure",
            "virtual": false,
            "visibility": "internal"
          }
        ],
        "scope": 7146,
        "src": "469:8203:31",
        "usedErrors": []
      }
    ],
    "src": "35:8638:31"
  },
  "compiler": {
    "name": "solc",
    "version": "0.8.19+commit.7dd6d404.Linux.g++"
  },
  "networks": {},
  "schemaVersion": "3.4.15",
  "updatedAt": "2023-08-28T20:10:53.332Z",
  "devdoc": {
    "author": "Superfluid",
    "details": "Helper library for building super agreement",
    "kind": "dev",
    "methods": {},
    "title": "Agreement Library",
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {},
    "version": 1
  }
}